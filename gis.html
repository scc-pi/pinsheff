<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 GIS | Notes</title>
  <meta name="description" content="Some notes, examples, lessons learnt and links to further resources." />
  <meta name="generator" content="bookdown 0.23 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 GIS | Notes" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Some notes, examples, lessons learnt and links to further resources." />
  <meta name="github-repo" content="scc-pi/notes" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 GIS | Notes" />
  
  <meta name="twitter:description" content="Some notes, examples, lessons learnt and links to further resources." />
  

<meta name="author" content="Laurie Platt" />


<meta name="date" content="2021-09-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="python.html"/>
<link rel="next" href="geocoding.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Notes</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>1</b> Version Control &amp; GitHub</a><ul>
<li class="chapter" data-level="1.1" data-path="github.html"><a href="github.html#why-version-control"><i class="fa fa-check"></i><b>1.1</b> Why version control?</a></li>
<li class="chapter" data-level="1.2" data-path="github.html"><a href="github.html#git"><i class="fa fa-check"></i><b>1.2</b> GIT</a></li>
<li class="chapter" data-level="1.3" data-path="github.html"><a href="github.html#github-1"><i class="fa fa-check"></i><b>1.3</b> GitHub</a><ul>
<li class="chapter" data-level="1.3.1" data-path="github.html"><a href="github.html#github-security-data-protection"><i class="fa fa-check"></i><b>1.3.1</b> Github security &amp; data protection</a></li>
<li class="chapter" data-level="1.3.2" data-path="github.html"><a href="github.html#forking-and-pull-requests"><i class="fa fa-check"></i><b>1.3.2</b> Forking and pull requests</a></li>
<li class="chapter" data-level="1.3.3" data-path="github.html"><a href="github.html#other-features"><i class="fa fa-check"></i><b>1.3.3</b> Other features</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="github.html"><a href="github.html#git-rstudio"><i class="fa fa-check"></i><b>1.4</b> Git &amp; RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r.html"><a href="r.html"><i class="fa fa-check"></i><b>2</b> R &amp; RStudio</a><ul>
<li class="chapter" data-level="2.1" data-path="r.html"><a href="r.html#why-script"><i class="fa fa-check"></i><b>2.1</b> Why script?</a></li>
<li class="chapter" data-level="2.2" data-path="r.html"><a href="r.html#style-guide"><i class="fa fa-check"></i><b>2.2</b> Style guide</a></li>
<li class="chapter" data-level="2.3" data-path="r.html"><a href="r.html#pid"><i class="fa fa-check"></i><b>2.3</b> RStudio security &amp; data protection</a><ul>
<li class="chapter" data-level="2.3.1" data-path="r.html"><a href="r.html#workspace"><i class="fa fa-check"></i><b>2.3.1</b> Workspace</a></li>
<li class="chapter" data-level="2.3.2" data-path="r.html"><a href="r.html#passwords"><i class="fa fa-check"></i><b>2.3.2</b> Passwords</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="r.html"><a href="r.html#getting-started"><i class="fa fa-check"></i><b>2.4</b> Getting started</a></li>
<li class="chapter" data-level="2.5" data-path="r.html"><a href="r.html#rstudio-tips"><i class="fa fa-check"></i><b>2.5</b> RStudio tips</a><ul>
<li class="chapter" data-level="2.5.1" data-path="r.html"><a href="r.html#code-display"><i class="fa fa-check"></i><b>2.5.1</b> Code display</a></li>
<li class="chapter" data-level="2.5.2" data-path="r.html"><a href="r.html#document-outline-and-headings"><i class="fa fa-check"></i><b>2.5.2</b> Document outline and headings</a></li>
<li class="chapter" data-level="2.5.3" data-path="r.html"><a href="r.html#viewpipesteps-addin"><i class="fa fa-check"></i><b>2.5.3</b> ViewPipeSteps addin</a></li>
<li class="chapter" data-level="2.5.4" data-path="r.html"><a href="r.html#shortcuts"><i class="fa fa-check"></i><b>2.5.4</b> Shortcuts</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="r.html"><a href="r.html#further-resources"><i class="fa fa-check"></i><b>2.6</b> Further resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rmd.html"><a href="rmd.html"><i class="fa fa-check"></i><b>3</b> R Markdown</a><ul>
<li class="chapter" data-level="3.1" data-path="rmd.html"><a href="rmd.html#r-markdown-vs-markdown"><i class="fa fa-check"></i><b>3.1</b> R Markdown vs Markdown</a></li>
<li class="chapter" data-level="3.2" data-path="rmd.html"><a href="rmd.html#child-markdown-iteration"><i class="fa fa-check"></i><b>3.2</b> Child markdown iteration</a></li>
<li class="chapter" data-level="3.3" data-path="rmd.html"><a href="rmd.html#notebooks"><i class="fa fa-check"></i><b>3.3</b> Notebooks</a></li>
<li class="chapter" data-level="3.4" data-path="rmd.html"><a href="rmd.html#bookdown"><i class="fa fa-check"></i><b>3.4</b> Bookdown</a><ul>
<li class="chapter" data-level="3.4.1" data-path="rmd.html"><a href="rmd.html#themes"><i class="fa fa-check"></i><b>3.4.1</b> Themes</a></li>
<li class="chapter" data-level="3.4.2" data-path="rmd.html"><a href="rmd.html#publishing"><i class="fa fa-check"></i><b>3.4.2</b> Publishing</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="rmd.html"><a href="rmd.html#flexdashboard"><i class="fa fa-check"></i><b>3.5</b> Flexdashboard</a></li>
<li class="chapter" data-level="3.6" data-path="rmd.html"><a href="rmd.html#further-resources-1"><i class="fa fa-check"></i><b>3.6</b> Further resources</a></li>
<li class="chapter" data-level="3.7" data-path="rmd.html"><a href="rmd.html#r-markdown-tips"><i class="fa fa-check"></i><b>3.7</b> R Markdown tips</a><ul>
<li class="chapter" data-level="3.7.1" data-path="rmd.html"><a href="rmd.html#markdown-visual-editor"><i class="fa fa-check"></i><b>3.7.1</b> Markdown visual editor</a></li>
<li class="chapter" data-level="3.7.2" data-path="rmd.html"><a href="rmd.html#chunk-named-setup"><i class="fa fa-check"></i><b>3.7.2</b> Chunk named setup</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="api.html"><a href="api.html"><i class="fa fa-check"></i><b>4</b> APIs</a><ul>
<li class="chapter" data-level="4.1" data-path="api.html"><a href="api.html#rest-apis"><i class="fa fa-check"></i><b>4.1</b> REST APIs</a></li>
<li class="chapter" data-level="4.2" data-path="api.html"><a href="api.html#wrappers"><i class="fa fa-check"></i><b>4.2</b> Wrappers</a></li>
<li class="chapter" data-level="4.3" data-path="api.html"><a href="api.html#rectangling"><i class="fa fa-check"></i><b>4.3</b> Rectangling</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="python.html"><a href="python.html"><i class="fa fa-check"></i><b>5</b> Python</a><ul>
<li class="chapter" data-level="5.1" data-path="python.html"><a href="python.html#reticulate"><i class="fa fa-check"></i><b>5.1</b> Reticulate</a></li>
<li class="chapter" data-level="5.2" data-path="python.html"><a href="python.html#arcgis-api-wrappers"><i class="fa fa-check"></i><b>5.2</b> ArcGIS &amp; API wrappers</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="gis.html"><a href="gis.html"><i class="fa fa-check"></i><b>6</b> GIS</a><ul>
<li class="chapter" data-level="6.1" data-path="gis.html"><a href="gis.html#spatial-data"><i class="fa fa-check"></i><b>6.1</b> Spatial data</a><ul>
<li class="chapter" data-level="6.1.1" data-path="gis.html"><a href="gis.html#councils-spatial-data"><i class="fa fa-check"></i><b>6.1.1</b> Council’s spatial data</a></li>
<li class="chapter" data-level="6.1.2" data-path="gis.html"><a href="gis.html#other-spatial-data"><i class="fa fa-check"></i><b>6.1.2</b> Other spatial data</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="gis.html"><a href="gis.html#web-maps-dashboards"><i class="fa fa-check"></i><b>6.2</b> Web maps &amp; dashboards</a><ul>
<li class="chapter" data-level="6.2.1" data-path="gis.html"><a href="gis.html#arcgis"><i class="fa fa-check"></i><b>6.2.1</b> ArcGIS</a></li>
<li class="chapter" data-level="6.2.2" data-path="gis.html"><a href="gis.html#power-bi"><i class="fa fa-check"></i><b>6.2.2</b> Power BI</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="gis.html"><a href="gis.html#desktop-gis"><i class="fa fa-check"></i><b>6.3</b> Desktop GIS</a><ul>
<li class="chapter" data-level="6.3.1" data-path="gis.html"><a href="gis.html#arcgis-desktop"><i class="fa fa-check"></i><b>6.3.1</b> ArcGIS Desktop</a></li>
<li class="chapter" data-level="6.3.2" data-path="gis.html"><a href="gis.html#arcgis-pro"><i class="fa fa-check"></i><b>6.3.2</b> ArcGIS Pro</a></li>
<li class="chapter" data-level="6.3.3" data-path="gis.html"><a href="gis.html#qgis"><i class="fa fa-check"></i><b>6.3.3</b> QGIS</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="gis.html"><a href="gis.html#scripted-gis"><i class="fa fa-check"></i><b>6.4</b> Scripted GIS</a><ul>
<li class="chapter" data-level="6.4.1" data-path="gis.html"><a href="gis.html#features"><i class="fa fa-check"></i><b>6.4.1</b> Features</a></li>
<li class="chapter" data-level="6.4.2" data-path="gis.html"><a href="gis.html#simple-features"><i class="fa fa-check"></i><b>6.4.2</b> Simple features</a></li>
<li class="chapter" data-level="6.4.3" data-path="gis.html"><a href="gis.html#coordinates-projections"><i class="fa fa-check"></i><b>6.4.3</b> Coordinates &amp; projections</a></li>
<li class="chapter" data-level="6.4.4" data-path="gis.html"><a href="gis.html#arcgis-r-python-packages"><i class="fa fa-check"></i><b>6.4.4</b> ArcGIS R &amp; Python packages</a></li>
<li class="chapter" data-level="6.4.5" data-path="gis.html"><a href="gis.html#leaflet"><i class="fa fa-check"></i><b>6.4.5</b> Leaflet</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="gis.html"><a href="gis.html#rasters"><i class="fa fa-check"></i><b>6.5</b> Rasters</a></li>
<li class="chapter" data-level="6.6" data-path="gis.html"><a href="gis.html#further-resources-2"><i class="fa fa-check"></i><b>6.6</b> Further resources</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="geocoding.html"><a href="geocoding.html"><i class="fa fa-check"></i><b>7</b> Postcodes &amp; Addresses</a><ul>
<li class="chapter" data-level="7.1" data-path="geocoding.html"><a href="geocoding.html#uprn"><i class="fa fa-check"></i><b>7.1</b> UPRN</a></li>
<li class="chapter" data-level="7.2" data-path="geocoding.html"><a href="geocoding.html#postcodes"><i class="fa fa-check"></i><b>7.2</b> Postcodes</a><ul>
<li class="chapter" data-level="7.2.1" data-path="geocoding.html"><a href="geocoding.html#pas-postcode-lookup"><i class="fa fa-check"></i><b>7.2.1</b> PAS Postcode Lookup</a></li>
<li class="chapter" data-level="7.2.2" data-path="geocoding.html"><a href="geocoding.html#postcode-boundaries"><i class="fa fa-check"></i><b>7.2.2</b> Postcode Boundaries</a></li>
<li class="chapter" data-level="7.2.3" data-path="geocoding.html"><a href="geocoding.html#split-postcodes"><i class="fa fa-check"></i><b>7.2.3</b> Split postcodes</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="geocoding.html"><a href="geocoding.html#addresses"><i class="fa fa-check"></i><b>7.3</b> Addresses</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="public-data.html"><a href="public-data.html"><i class="fa fa-check"></i><b>8</b> Public Data Sources</a><ul>
<li class="chapter" data-level="8.1" data-path="public-data.html"><a href="public-data.html#office-of-national-statistics"><i class="fa fa-check"></i><b>8.1</b> Office of National Statistics</a><ul>
<li class="chapter" data-level="8.1.1" data-path="public-data.html"><a href="public-data.html#crm"><i class="fa fa-check"></i><b>8.1.1</b> CRM</a></li>
<li class="chapter" data-level="8.1.2" data-path="public-data.html"><a href="public-data.html#nomis"><i class="fa fa-check"></i><b>8.1.2</b> NOMIS</a></li>
<li class="chapter" data-level="8.1.3" data-path="public-data.html"><a href="public-data.html#open-geography"><i class="fa fa-check"></i><b>8.1.3</b> Open Geography Portal</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="public-data.html"><a href="public-data.html#ministry-of-housing-communities-local-government"><i class="fa fa-check"></i><b>8.2</b> Ministry of Housing, Communities &amp; Local Government</a></li>
<li class="chapter" data-level="8.3" data-path="public-data.html"><a href="public-data.html#ordnance-survey"><i class="fa fa-check"></i><b>8.3</b> Ordnance Survey</a><ul>
<li class="chapter" data-level="8.3.1" data-path="public-data.html"><a href="public-data.html#os-data-hub"><i class="fa fa-check"></i><b>8.3.1</b> OS Data Hub</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="public-data.html"><a href="public-data.html#lginform"><i class="fa fa-check"></i><b>8.4</b> LGInform?</a></li>
<li class="chapter" data-level="8.5" data-path="public-data.html"><a href="public-data.html#lsoapop-r-package"><i class="fa fa-check"></i><b>8.5</b> LSOApop R package</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="databases.html"><a href="databases.html"><i class="fa fa-check"></i><b>9</b> Databases</a><ul>
<li class="chapter" data-level="9.1" data-path="databases.html"><a href="databases.html#corporate-data-warehouse"><i class="fa fa-check"></i><b>9.1</b> Corporate data warehouse</a><ul>
<li class="chapter" data-level="9.1.1" data-path="databases.html"><a href="databases.html#oscar"><i class="fa fa-check"></i><b>9.1.1</b> OSCAR</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="databases.html"><a href="databases.html#corporate-spatial-database"><i class="fa fa-check"></i><b>9.2</b> Corporate spatial database</a></li>
<li class="chapter" data-level="9.3" data-path="databases.html"><a href="databases.html#sqlite"><i class="fa fa-check"></i><b>9.3</b> SQLite</a><ul>
<li class="chapter" data-level="9.3.1" data-path="databases.html"><a href="databases.html#spatialite"><i class="fa fa-check"></i><b>9.3.1</b> SpatiaLite</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="databases.html"><a href="databases.html#further-resources-3"><i class="fa fa-check"></i><b>9.4</b> Further resources</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="other.html"><a href="other.html"><i class="fa fa-check"></i><b>10</b> Other</a><ul>
<li class="chapter" data-level="10.1" data-path="other.html"><a href="other.html#renv"><i class="fa fa-check"></i><b>10.1</b> renv</a></li>
<li class="chapter" data-level="10.2" data-path="other.html"><a href="other.html#docker"><i class="fa fa-check"></i><b>10.2</b> Docker</a></li>
<li class="chapter" data-level="10.3" data-path="other.html"><a href="other.html#reprex-r-package"><i class="fa fa-check"></i><b>10.3</b> reprex R package</a></li>
<li class="chapter" data-level="10.4" data-path="other.html"><a href="other.html#writing-r-packages"><i class="fa fa-check"></i><b>10.4</b> Writing R packages</a><ul>
<li class="chapter" data-level="10.4.1" data-path="other.html"><a href="other.html#roxygen2"><i class="fa fa-check"></i><b>10.4.1</b> roxygen2</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="other.html"><a href="other.html#plumber-r-package"><i class="fa fa-check"></i><b>10.5</b> plumber R package</a></li>
<li class="chapter" data-level="10.6" data-path="other.html"><a href="other.html#data-visualisation"><i class="fa fa-check"></i><b>10.6</b> Data Visualisation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="gis" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> GIS</h1>
<p>This chapter is particularly aimed at our data analysts with little or no experience of spatial data and GIS. GIS has traditionally been the domain of specialists and this is especially true in the Council. However, the Council’s new web based GIS tools will open up GIS to a wider user base, with an opportunity for data analysts to make more use of spatial data without being a GIS specialist.</p>
<p>A word of warning before you jump in, the guidance, examples and functions targeted at helping you use our spatial data is still very much work-in-progress (<em>TODO</em>).</p>
<div id="spatial-data" class="section level2">
<h2><span class="header-section-number">6.1</span> Spatial data</h2>
<div id="councils-spatial-data" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Council’s spatial data</h3>
<p>The Council’s spatial data is hosted by ESRI’s ArcGIS web GIS tools.</p>
<p>Portal (ArcGIS Enterprise) is Council-wide:</p>
<blockquote>
<p><a href="https://sheffieldcitycouncil.cloud.esriuk.com/portal/home/">sheffieldcitycouncil.cloud.esriuk.com/portal/home</a></p>
</blockquote>
<p>ArcGIS Online (AGOL) is the public facing equivalent of Portal:</p>
<blockquote>
<p><a href="https://sheffieldcc.maps.arcgis.com/">sheffieldcc.maps.arcgis.com</a></p>
</blockquote>
<p>Unlike R, ArcGIS is not open source and incurs a financial cost. Portal and AGOL require login credentials for both licensing and data protection purposes. The exception, is some public data on AGOL, for example the Council’s open data site:</p>
<blockquote>
<p><a href="https://data-sheffieldcc.opendata.arcgis.com/">data-sheffieldcc.opendata.arcgis.com</a></p>
</blockquote>
</div>
<div id="other-spatial-data" class="section level3">
<h3><span class="header-section-number">6.1.2</span> Other spatial data</h3>
<p>ESRI’s <a href="https://livingatlas.arcgis.com/en/home/">Living Atlas</a> has a lot of content, but I’ve yet to properly explore or use it (<em>TODO</em>).</p>
<p>More specific to the UK, is spatial data from ONS and Ordnance Survey. There are some notes on accessing this data in the chapter on <a href="public-data.html#public-data">Public Data Sources</a> under <a href="public-data.html#open-geography">Open Geography Portal</a> and <a href="public-data.html#os-data-hub">OS Data Hub</a>.</p>
</div>
</div>
<div id="web-maps-dashboards" class="section level2">
<h2><span class="header-section-number">6.2</span> Web maps &amp; dashboards</h2>
<div id="arcgis" class="section level3">
<h3><span class="header-section-number">6.2.1</span> ArcGIS</h3>
<p>The Council’s Portal and AGOL are the default home for our spatial data. Similarly, if you’re looking to not just extract spatial data, but to share it or share spatial analysis via a web map or dashboard, then the default is also the Council’s Portal and AGOL. To share content on Portal or AGOL you need a Creator license for which there is separate guidance (<em>TODO - add cross ref.</em>).</p>
</div>
<div id="power-bi" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Power BI</h3>
<p>The GIS capabilities of Power BI do not match Portal or AGOL, but if only a small proportion of the analysis you are sharing is spatial then Power BI could be a good option. The ArcGIS Power BI integration tool is now available to us at no extra cost, but we are yet to test it (<em>TODO</em>).</p>
</div>
</div>
<div id="desktop-gis" class="section level2">
<h2><span class="header-section-number">6.3</span> Desktop GIS</h2>
<p>For some specialised spatial analysis a desktop GIS is best. However, as we move to sharing spatial information using web maps and dashboards, rather than static PDF maps, desktop GIS is increasingly a tool for GIS specialists.</p>
<div id="arcgis-desktop" class="section level3">
<h3><span class="header-section-number">6.3.1</span> ArcGIS Desktop</h3>
<p>For the last fifteen, twenty years, the Council’s spatial analysis has largely been done using ArcGIS Desktop from ESRI. This is a powerful piece of software, but for the majority of GIS uses, it’s a sledge hammer to crack a nut. If you’ve not done spatial analysis before, the recommendation is to first try our new, far more intuitive, ArcGIS web GIS tools i.e. our Portal and AGOL.</p>
<p>ESRI have stopped development of ArcGIS Desktop, though it won’t be retired for some years yet. New functionality will only be added to ArcGIS Pro from now on.</p>
</div>
<div id="arcgis-pro" class="section level3">
<h3><span class="header-section-number">6.3.2</span> ArcGIS Pro</h3>
<p>ArcGIS Pro is another desktop GIS application from ESRI. It isn’t as old as ArcGIS Desktop, so has less legacy issues, it is 64-bit and is more closely integrated with the ArcGIS Enterprise (Portal) and AGOL. However, the single biggest difference is that the hundreds of nested menu driven options are located in different places to ArcGIS Desktop!</p>
<p>The Council has an ArcGIS Pro license for every purchased ArcGIS Desktop license.</p>
</div>
<div id="qgis" class="section level3">
<h3><span class="header-section-number">6.3.3</span> QGIS</h3>
<p>QGIS is an open source alternative to ArcGIS Desktop and ArcGIS Pro.</p>
</div>
</div>
<div id="scripted-gis" class="section level2">
<h2><span class="header-section-number">6.4</span> Scripted GIS</h2>
<div id="features" class="section level3">
<h3><span class="header-section-number">6.4.1</span> Features</h3>
<p>The term “feature” is useful to distinguish a record as “spatial”. By “spatial” we mean it has a point, a line or a polygon. A point is a pair of coordinates, a line a minimum of two pairs of coordinates and polygons at least three pairs.</p>
<p>Something to keep an eye out for is MULTIPOINT, multi-part polygons etc. This is a single record, a single feature, but it has more than one point, line or polygon. For example, Sheffield secondary school features might be MULTIPOINT so that the feature for King Edward VII school can have one point for the Lower School near Crosspool, and another point for the Upper School in Broomhill.</p>
</div>
<div id="simple-features" class="section level3">
<h3><span class="header-section-number">6.4.2</span> Simple features</h3>
<p>Simple features is an open standard developed by the Open Geospatial Consortium. It is a hierarchical data model that represents a wide range of geometry types, all of which are supported by the <a href="https://r-spatial.github.io/sf/index.html">sf R package</a>. The <code>sf</code> package also plays nice with the <code>tidyverse</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="gis.html#cb11-1"></a><span class="co"># Create a data frame with some example records </span></span>
<span id="cb11-2"><a href="gis.html#cb11-2"></a>df &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw">tribble</span>(</span>
<span id="cb11-3"><a href="gis.html#cb11-3"></a>  <span class="op">~</span>name,    <span class="op">~</span>postcode, <span class="op">~</span>longitude,  <span class="op">~</span>latitude,</span>
<span id="cb11-4"><a href="gis.html#cb11-4"></a>  <span class="st">&quot;SCC&quot;</span>,    <span class="st">&quot;S1 2HH&quot;</span>,    <span class="fl">-1.470006</span>,   <span class="fl">53.38038</span>,</span>
<span id="cb11-5"><a href="gis.html#cb11-5"></a>  <span class="st">&quot;Blades&quot;</span>, <span class="st">&quot;S2 4SU&quot;</span>,  <span class="fl">-1.470512</span>,   <span class="fl">53.36986</span>,</span>
<span id="cb11-6"><a href="gis.html#cb11-6"></a>  <span class="st">&quot;Owls&quot;</span>,   <span class="st">&quot;S6 1SW&quot;</span>,    <span class="fl">-1.500859</span>,   <span class="fl">53.41084</span></span>
<span id="cb11-7"><a href="gis.html#cb11-7"></a>)</span>
<span id="cb11-8"><a href="gis.html#cb11-8"></a></span>
<span id="cb11-9"><a href="gis.html#cb11-9"></a><span class="co"># Create simple features</span></span>
<span id="cb11-10"><a href="gis.html#cb11-10"></a>sf_shef &lt;-<span class="st"> </span>sf<span class="op">::</span><span class="kw">st_as_sf</span>(df, </span>
<span id="cb11-11"><a href="gis.html#cb11-11"></a>                        <span class="dt">coords =</span> <span class="kw">c</span>(<span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;latitude&quot;</span>), <span class="co">#from postcodes.io</span></span>
<span id="cb11-12"><a href="gis.html#cb11-12"></a>                        <span class="dt">crs =</span> <span class="dv">4326</span>) <span class="co">#WSG84</span></span>
<span id="cb11-13"><a href="gis.html#cb11-13"></a></span>
<span id="cb11-14"><a href="gis.html#cb11-14"></a><span class="co"># Plot</span></span>
<span id="cb11-15"><a href="gis.html#cb11-15"></a>mapview<span class="op">::</span><span class="kw">mapview</span>(sf_shef, <span class="dt">layer.name =</span> <span class="st">&quot;Sheffield institutions&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-070aa9d67833efb70720" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-070aa9d67833efb70720">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[[53.38038,53.36986,53.41084],[-1.470006,-1.470512,-1.500859],6,null,"Sheffield institutions",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6},null,null,["<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>name&emsp;<\/th><td>SCC&emsp;<\/td><\/tr><tr><td>2<\/td><th>postcode&emsp;<\/th><td>S1 2HH&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>2&emsp;<\/td><\/tr><tr><td>1<\/td><th>name&emsp;<\/th><td>Blades&emsp;<\/td><\/tr><tr><td>2<\/td><th>postcode&emsp;<\/th><td>S2 4SU&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>","<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>3&emsp;<\/td><\/tr><tr><td>1<\/td><th>name&emsp;<\/th><td>Owls&emsp;<\/td><\/tr><tr><td>2<\/td><th>postcode&emsp;<\/th><td>S6 1SW&emsp;<\/td><\/tr><tr><td>3<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["1","2","3"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-1.500859,53.36986,-1.470006,53.41084,true,"Sheffield institutions","Zoom to Sheffield institutions","<strong> Sheffield institutions <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"Sheffield institutions",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["Sheffield institutions"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"Sheffield institutions"}]}],"limits":{"lat":[53.36986,53.41084],"lng":[-1.500859,-1.470006]},"fitBounds":[53.36986,-1.500859,53.41084,-1.470006,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
</div>
<div id="coordinates-projections" class="section level3">
<h3><span class="header-section-number">6.4.3</span> Coordinates &amp; projections</h3>
<p>The minimum you need to know is that any spatial data you use is likely to involve one or more of three coordinate systems:</p>
<ol style="list-style-type: decimal">
<li>WSG84 with an ESPG of 4326</li>
<li>Web Mercator with an EPSG of 3857</li>
<li>OSGB1936 (British National Grid) with an ESPG of 27700</li>
</ol>
<p>Most web maps are based on features stored as WSG84 and displayed (projected) as Web Mercator. Postcodes.io uses WSG84, but the Council’s Portal and the ONS Open Geography Portal use OSGB1936 (BNG) (<em>TODO</em>: <em>need to double check this!!)</em>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="gis.html#cb12-1"></a><span class="co"># Check the coordinate system of simple features</span></span>
<span id="cb12-2"><a href="gis.html#cb12-2"></a>sf<span class="op">::</span><span class="kw">st_crs</span>(sf_shef)</span></code></pre></div>
<pre><code>## Coordinate Reference System:
##   User input: EPSG:4326 
##   wkt:
## GEOGCRS[&quot;WGS 84&quot;,
##     DATUM[&quot;World Geodetic System 1984&quot;,
##         ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
##             LENGTHUNIT[&quot;metre&quot;,1]]],
##     PRIMEM[&quot;Greenwich&quot;,0,
##         ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##     CS[ellipsoidal,2],
##         AXIS[&quot;geodetic latitude (Lat)&quot;,north,
##             ORDER[1],
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##         AXIS[&quot;geodetic longitude (Lon)&quot;,east,
##             ORDER[2],
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##     USAGE[
##         SCOPE[&quot;Horizontal component of 3D system.&quot;],
##         AREA[&quot;World.&quot;],
##         BBOX[-90,-180,90,180]],
##     ID[&quot;EPSG&quot;,4326]]</code></pre>
<div id="geographic-projected-coordinate-systems" class="section level4">
<h4><span class="header-section-number">6.4.3.1</span> Geographic &amp; projected coordinate systems</h4>
<p>A reference ellipsoid as an approximation of the surface of the earth and provides a shape on which a coordinate system can be placed.</p>
<p><strong>Geographic coordinate systems</strong> use the ellipsoid to define specific locations on the surface to create a grid. Datums are geographic coordinate systems based on a specific ellipsoid (so a more specific geographic coordinate system), with an origin at a specific location, and the ellipsoid at a specific orientation. These are also called “spatial reference systems” or “coordinate reference systems”.</p>
<p><strong>Projected coordinate systems</strong> are like geographic coordinate systems. A projected coordinate system is also a grid used as a reference for locations on the planet, but it’s a translation of the three-dimensional grid onto a two-dimensional plane such as a paper map or screen.</p>
<blockquote>
<p>A GCS defines <strong><em>where</em></strong> the data is located on the earth’s surface. A PCS tells the data <strong><em>how</em></strong> to draw on a flat surface such as a screen.</p>
</blockquote>
<p>Coordinate systems, projected and geographic, are often identified by an <a href="https://epsg.org/home.html">EPSG code</a>.</p>
</div>
</div>
<div id="arcgis-r-python-packages" class="section level3">
<h3><span class="header-section-number">6.4.4</span> ArcGIS R &amp; Python packages</h3>
<p>Listed below are R and Python packages that allow us to leverage ArcGIS functionality. Generally speaking, they are in ascending order of both ease of use and scope of functionality.</p>
<table>
<colgroup>
<col width="16%" />
<col width="9%" />
<col width="30%" />
<col width="43%" />
</colgroup>
<thead>
<tr class="header">
<th>Package</th>
<th>Language</th>
<th>ArcGIS Desktop Install Required</th>
<th>Scope</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>esri2sf</code></td>
<td>R</td>
<td>✕</td>
<td>Read from AGOL &amp; ArcGIS Enterprise</td>
</tr>
<tr class="even">
<td><code>arcgisbinding</code></td>
<td>R</td>
<td>✓</td>
<td>Read &amp; write from AGOL &amp; ArcGIS Enterprise</td>
</tr>
<tr class="odd">
<td><code>arcgis</code></td>
<td>Python</td>
<td>✓</td>
<td>Access AGOL &amp; ArcGIS Enterprise functionality</td>
</tr>
<tr class="even">
<td><code>arcpy</code></td>
<td>Python</td>
<td>✓</td>
<td>Access ArcGIS Desktop or Pro functionality</td>
</tr>
</tbody>
</table>
<div id="esri2sf" class="section level4">
<h4><span class="header-section-number">6.4.4.1</span> esri2sf</h4>
<p>The <code>esri2sf</code> R package is the only one of the four packages listed above that is not maintained by ESRI. It is the simplest to start using because it doesn’t require an installation and license for ArcGIS Desktop or Pro. The flip side, is that it has the least amount of functionality and the code isn’t as robust. The scope of the package is limited to reading simple features or data frames from AGOL &amp; ArcGIS Enterprise (ours or other organisation’s).</p>
<p>The <a href="https://geoportal.statistics.gov.uk/">ONS Open Geography Portal</a> is based on the same ArcGIS web tools as our Portal and AGOL. To get, for example, the local authority boundary for Sheffield you first need to navigate to the <a href="https://geoportal.statistics.gov.uk/datasets/local-authority-districts-december-2020-uk-bgc?geometry=-45.896%2C51.101%2C41.028%2C59.782">dataset</a> on the website and get the GeoService API URL:</p>
<p><img src="images/open-geog-api.png" /></p>
<p>Then, using:</p>
<ol style="list-style-type: decimal">
<li><p>the copied GeoService URL,</p>
<blockquote>
<p><a href="https://services1.arcgis.com/ESMARspQHYMw9BZ9/arcgis/rest/services/Local_Authority_Districts_December_2020_UK_BGC/FeatureServer/0/query?outFields=\\\*&amp;where=1%3D1" class="uri">https://services1.arcgis.com/ESMARspQHYMw9BZ9/arcgis/rest/services/Local_Authority_Districts_December_2020_UK_BGC/FeatureServer/0/query?outFields=\\\\\\\*&amp;where=1%3D1</a></p>
</blockquote></li>
<li><p>some resources to understand how to query the API,</p>
<blockquote>
<p><a href="https://developers.arcgis.com/rest/services-reference/query-feature-service-layer-.htm">ArcGIS REST API - Query (Feature Service/Layer)</a></p>
<p><a href="https://ronsavage.github.io/SQL/sql-92.bnf.html">SQL 92</a> is used by ESRI based APIs</p>
<p><a href="https://www.w3schools.com/tags/ref_urlencode.ASP">HTML encoding</a> is used for building URL queries</p>
</blockquote></li>
<li><p>and <code>esri2sf</code>,</p></li>
</ol>
<p>we can get the Sheffield boundary as a simple feature:</p>
<p><em>TODO: install esri2sf via deploy_bookdown.yml</em></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="gis.html#cb14-1"></a><span class="co"># Base URL for ONS Open Geography Portal</span></span>
<span id="cb14-2"><a href="gis.html#cb14-2"></a>ons_geog_base_url &lt;-<span class="st"> &quot;https://services1.arcgis.com/ESMARspQHYMw9BZ9/arcgis/rest/services/&quot;</span></span>
<span id="cb14-3"><a href="gis.html#cb14-3"></a></span>
<span id="cb14-4"><a href="gis.html#cb14-4"></a><span class="co"># URL part for how detailed the local authority boundary should be</span></span>
<span id="cb14-5"><a href="gis.html#cb14-5"></a>generalised &lt;-<span class="st"> &quot;Local_Authority_Districts_December_2020_UK_BGC&quot;</span></span>
<span id="cb14-6"><a href="gis.html#cb14-6"></a></span>
<span id="cb14-7"><a href="gis.html#cb14-7"></a><span class="co"># Get Sheffield MSOA boundaries as simple features  </span></span>
<span id="cb14-8"><a href="gis.html#cb14-8"></a>shef_msoa &lt;-<span class="st"> </span>esri2sf<span class="op">::</span><span class="kw">esri2sf</span>(<span class="dt">url =</span> stringr<span class="op">::</span><span class="kw">str_c</span>(ons_geog_base_url,</span>
<span id="cb14-9"><a href="gis.html#cb14-9"></a>                                                   generalised,</span>
<span id="cb14-10"><a href="gis.html#cb14-10"></a>                                                   <span class="st">&quot;/FeatureServer/0&quot;</span>),</span>
<span id="cb14-11"><a href="gis.html#cb14-11"></a>                              <span class="dt">where =</span> <span class="st">&quot;LAD20NM LIKE&#39;Sheffield%&#39;&quot;</span>,</span>
<span id="cb14-12"><a href="gis.html#cb14-12"></a>                              <span class="dt">geomType =</span> <span class="st">&quot;esriGeometryPolygon&quot;</span>)</span>
<span id="cb14-13"><a href="gis.html#cb14-13"></a></span>
<span id="cb14-14"><a href="gis.html#cb14-14"></a><span class="co"># Plot</span></span>
<span id="cb14-15"><a href="gis.html#cb14-15"></a>mapview<span class="op">::</span><span class="kw">mapview</span>(shef_msoa, <span class="dt">layer.name =</span> <span class="st">&quot;Sheffield&quot;</span>)</span></code></pre></div>
<p>The example above reads open data. However, most of the Council’s spatial data on Portal and AGOL requires login credentials to to access. Nevertheless, Portal and AGOL login credentials are a smaller requirement than a ArcGIS Desktop or Pro installation and license.</p>
<p><em>TODO - test and note authentication with token</em></p>
<p>Our public <a href="https://github.com/scc-pi/functions">github.com/scc-pi/functions</a> repository includes functions in <code>ShefAreas.R</code> that use <code>esri2sf</code>. The sub-headings immediately below outline how other ArcGIS packages are more powerful, but also more onerous in terms of licensing and setup. So where possible, the intention is to utilise <code>esri2sf</code> in preference to the other ArcGIS packages.</p>
<p>Relying on <code>esri2sf</code> may require some contributions to the <code>esri2sf</code> repository. For example, a pull request to fix an assumption that at least 500 features can be served at a time, when the ONS Open Geography Portal limit is 50 (hence our forked <a href="https://github.com/scc-pi/esri2sf">github.com/scc-pi/esri2sf</a> repository). Contributing to <code>esri2sf</code> repository is preferable to accessing the Portal or AGOL API via Javascript, which is better suited to web developers than data analysts.</p>
<p>Further information on the <code>esri2sf</code> package, how to install and use it, is available from <a href="https://github.com/yonghah/esri2sf">github.com/yonghah/esri2sf</a>.</p>
</div>
<div id="r-arcgis-bridge" class="section level4">
<h4><span class="header-section-number">6.4.4.2</span> R-ArcGIS Bridge</h4>
<p>The R-ArcGIS Bridge is the name for the <code>arcgisbinding</code> R package. It’s scope is limited to:</p>
<ul>
<li><p>Transferring data in both directions between ArcGIS and R</p></li>
<li><p>Wrapping R tools for use in ArcGIS</p></li>
</ul>
<p>For more information on using the <code>arcgisbinding</code> package see the vignette on <a href="https://r.esri.com/assets/arcgisbinding-vignette.html">Using the R-ArcGIS Bridge</a>.</p>
<p>To use the R-ArcGIS Bridge you need an installation and license for ArcGIS Desktop or Pro. After loading the <code>arcgisbinding</code> package you have to call <code>arc.check_product()</code> to define a desktop license:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="gis.html#cb15-1"></a><span class="kw">library</span>(arcgisbinding)</span>
<span id="cb15-2"><a href="gis.html#cb15-2"></a><span class="kw">arc.check_product</span>()</span></code></pre></div>
<p>Using <code>arcgisbinding</code> with ArcGIS Desktop means that you need to use 32-bit R, because ArcGIS Desktop is 32-bit. An ArcGIS Desktop 64-bit Background Geoprocessing option is a red herring because it only allows using the bridge from ArcGIS, not from within R itself. ArcGIS Pro is 64-bit and allows you to use use 64-bit R with <code>arcgisbinding</code>.</p>
<p>The <a href="https://github.com/R-ArcGIS/r-bridge/blob/master/README.md">README.md in the r-bridge GitHub repository</a> is the best starting point for more detail on R-ArcGIS Bridge requirements and installation.</p>
<p><em>TODO: - open, select, read example (how do I render in GitHub Actions with arc.check_product()?)</em></p>
</div>
<div id="arcgis-python-api" class="section level4">
<h4><span class="header-section-number">6.4.4.3</span> ArcGIS Python API</h4>
<p>The Council’s ArcGIS software from ESRI has a much stronger integration with Python than R. The <code>arcgis</code> package is used to work with ArcGIS Enterprise (Portal) and AGOL.</p>
<p><em>- The name of the package and it’s purpose - OneNote?</em></p>
<p>To use the <code>arcpy</code> or <code>arcgis</code> packages we first need to specify the <a href="https://developers.arcgis.com/python/guide/install-and-set-up/">ArcGIS Python environment</a></p>
</div>
<div id="arcpy" class="section level4">
<h4><span class="header-section-number">6.4.4.4</span> ArcPy</h4>
<p>The <code>arcpy</code> package is used to leverage the ArcGIS Desktop or Pro functionality. Like the <code>arcgis</code> package, to use the <code>arcpy</code> package we first need to specify the <a href="https://developers.arcgis.com/python/guide/install-and-set-up/">ArcGIS Python environment</a>.</p>
<p>The distinction between web and desktop, for <code>arcgis</code> and <code>arcpy</code> packages respectively, is a bit of a simplification but it serves a purpose. It’s worth noting that the integration between the two packages isn’t as seamless as you might expect.</p>
<p><em>TODO</em></p>
<p><em>- setup</em></p>
<p><em>- cross ref Docker</em></p>
</div>
</div>
<div id="leaflet" class="section level3">
<h3><span class="header-section-number">6.4.5</span> Leaflet</h3>
<p><em>TODO</em></p>
</div>
</div>
<div id="rasters" class="section level2">
<h2><span class="header-section-number">6.5</span> Rasters</h2>
<p><em>TODO</em></p>
</div>
<div id="further-resources-2" class="section level2">
<h2><span class="header-section-number">6.6</span> Further resources</h2>
<p><a href="https://geocompr.robinlovelace.net/">Geocomputation with R</a>, by Robin Lovelace</p>
<p><a href="https://r-spatial.github.io/mapview/articles/articles/mapview_01-basics.html">mapview basics</a> vignette</p>
<p><a href="https://www.esri.com/arcgis-blog/products/arcgis-pro/mapping/gcs_vs_pcs/">Geographic vs Projected Coordinate Systems</a>, Heather Smith, ArcGIS Blog (27 February 2020)</p>
<p><a href="https://lyzidiamond.com/posts/4326-vs-3857#:~:text=EPSG%3A3857%20(Pseudo%2DMercator),-The%20projected%20Pseudo&amp;text=This%20projection%20was%20first%20introduced,the%20coordinates%20onto%20a%20sphere.">EPSG 4326 vs EPSG 3857</a>, Lyzi Diamond (26 May 2017)</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="python.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="geocoding.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"info": true
});
});
</script>

</body>

</html>
