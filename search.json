[{"path":"index.html","id":"about","chapter":"About","heading":"About","text":"Welcome Performance & Intelligence Notes Sheffield City Council, pinsheff short. Data Analysis Notes Sheffield City Council might better name, ’ve already got couple Dans team.place ad-hoc notes, mainly scripting mainly R scripts. ’s somewhere store lessons learnt examples. resource remind return something away , smooth path little ’s something new.many excellent online resources notes point attempt replace. Overtime notes may mature package vignettes become accepted good practice included Methods Manual.Hopefully, others Performance & Intelligence Team, elsewhere Sheffield City Council, contribute notes. However, currently ’s just one person biased one person’s recent experience: ETL, geocoding spatial analysis. Notes modelling visualisations lacking.well contributors content, purpose scope open change. hope find notes useful.","code":""},{"path":"power-bi-fundamentals.html","id":"power-bi-fundamentals","chapter":"1 Power BI fundamentals","heading":"1 Power BI fundamentals","text":"Power BI section likely superseded fairly soon MS Teams site setup Jess Kavanagh. Teams site help collate disseminate learning shared Giles Robinson, Sam Jenner, others via SCC Power BI user group coordinated Paul Haine.","code":""},{"path":"power-bi-fundamentals.html","id":"what-is-power-bi","chapter":"1 Power BI fundamentals","heading":"1.1 What is Power BI?","text":"Power BI tool combining, analysing, visualising data, sharing results. ’s Microsoft product (originally Excel add-) fits well Council’s move Microsoft Azure services. ’s also reasonably priced compared alternative tools Tableau (arguably higher quality option).Power BI now main Council tool data analysis. rather, need something data analysis oomph Excel, Power BI probably first tool consider. ’s similar ArcGIS main Council tool spatial analysis.Council’s current Power BI setup includes three main pieces software:Power BI desktop - local install, designing reports (dashboards).Power BI report server - browser based internal report sharing.Power BI service - browser based non-confidential report sharing.","code":""},{"path":"power-bi-fundamentals.html","id":"service","chapter":"1 Power BI fundamentals","heading":"1.2 Service","text":"Power BI service functionality report server. Council’s Corporate Performance reporting via Power BI service, doesn’t include PID. Council Officers Power BI Pro license needs activating BCIS.","code":""},{"path":"power-bi-fundamentals.html","id":"report-server","chapter":"1 Power BI fundamentals","heading":"1.3 Report server","text":"Power BI report server (https://sccvmazpbi01.sheffield.gov.uk/reports) available within Council’s network. currently default Council option sharing Power BI reports. Contact Keith Dunk request new folder Report Server control .Keep mind Microsoft documentation geared towards using Power BI service.can upload report give permissions just report, need share link report. Unless give permission folder navigate , can give browser access folder report can open . Click … side folder name select manage security (reports uploaded). Permissions added via user ID e.g. LP41455. User IDs can found Alias field Global Address List Outlook.want enable auto-refresh need create report using URL drive mapping, Paul Haine can advise .","code":""},{"path":"power-bi-fundamentals.html","id":"desktop","chapter":"1 Power BI fundamentals","heading":"1.4 Desktop","text":"version compatibility reasons, upload reports report server need use May 2021 version Power BI desktop. version available Council’s Software Centre laptop. different version, remove install Software Centre version.","code":""},{"path":"power-bi-fundamentals.html","id":"roles","chapter":"1 Power BI fundamentals","heading":"1.5 Roles","text":"consumer business user, receives content (e.g. dashboards) colleagues. Business user term used Microsoft’s Power BI documentation. Similarly, someone creates content called designer. roles include administrator developer.SCC Power BI user group meets monthly aimed Power BI designers administrators business users.","code":""},{"path":"power-bi-fundamentals.html","id":"further-resources","chapter":"1 Power BI fundamentals","heading":"1.6 Further resources","text":"","code":""},{"path":"power-bi-fundamentals.html","id":"for-business-users","chapter":"1 Power BI fundamentals","heading":"1.6.1 For business users","text":"Using Power BI reporting server: TODOUsing Power BI service: Explore Power BI can , one hour online Microsoft learning module.","code":""},{"path":"power-bi-fundamentals.html","id":"for-designers","chapter":"1 Power BI fundamentals","heading":"1.6.2 For designers","text":"good way quickly get familiar Power BI free Power BI Dashboard Day tutor-led online workshop, indirectly provided Microsoft.Create use analytics reports Power BI self-paced online Microsoft learning path.Free e-book Introducing Microsoft Power BI Alberto Ferrari & Marco Russo (2016).","code":""},{"path":"dax.html","id":"dax","chapter":"2 DAX","heading":"2 DAX","text":"Data Analysis Expressions (DAX) formula expression language used MIcrosoft Analysis Services, Power BI, Power Pivot Excel.DAX overview (MS Docs)","code":""},{"path":"dax.html","id":"row-context","chapter":"2 DAX","heading":"2.1 Row context","text":"DAX vectorised like R, concept “current row” might familiar using VBA cursor procedural transact SQL. article Row context DAX Marco Russo & Alberto Ferrari (28/03/22) explains well.","code":""},{"path":"dax.html","id":"further-resources-1","chapter":"2 DAX","heading":"2.2 Further resources","text":"…","code":""},{"path":"why-script.html","id":"why-script","chapter":"3 Why script?","heading":"3 Why script?","text":"Sheffield City Council made fantastic progress recent years data analysis tools, new GIS infrastructure Power BI. powerful intuitive, great full time data analysts data analysis part responsibilities. Scripting another tool becoming increasingly available us now Council’s rapidly evolving improvements.","code":""},{"path":"why-script.html","id":"what-is-scripting","chapter":"3 Why script?","heading":"3.1 What is scripting?","text":"Scripts series typed commands file. “run” script, asking programme interpret fulfil commands script accomplish given task.terms “scripting”, “coding” “programming” often used synonymously. accurately though, coding programming umbrella terms scripting just part . Compared coding programming, scripting generally covers less complex tasks, easier understand language, fewer commands.","code":""},{"path":"why-script.html","id":"scripting-for-data-analysis","chapter":"3 Why script?","heading":"3.2 Scripting for data analysis","text":"Scripts can used accomplish variety tasks. example, BCIS Sheffield City Council use scripts update maintain laptops servers.purposes notes, scope scripting limited scripting data analysis. , scripting accomplish data analysis tasks, including data: extraction, transformation, loading, exploration, analysis, modelling, visualisation, narration.Scripting data capture, data entry, outside scope notes.","code":""},{"path":"why-script.html","id":"scripting-pros-cons","chapter":"3 Why script?","heading":"3.3 Scripting pros & cons?","text":"’s element self-documentation scripting, ’s easier return scripted task bit time away , pick scripted task colleague. However, -line comments adherence style guide make big difference just easy . Version control collaboration also generally easier scripting GUI (point--click) tools.Scripting always better using GUI tools. ’s good reason people use Mac OS Windows Unix Bash. Scripting GUI tools horses courses question, GUI workflow tools Council licenses (e.g. FME, Simul8 ModelBuilder ArcGIS) sit somewhere middle.RStudio makes (slightly biased?) case scripting hour long webinar Enterprise Needs Code-First Data Science.Probably single main advantage scripting, touched upon start sub-heading .e. reproducibility.","code":""},{"path":"why-script.html","id":"reproducibility","chapter":"3 Why script?","heading":"3.4 Reproducibility","text":"good explanation value reproducibility included RAP (Reproducible Analytical Pipelines), one Government’s Analytical Learning Pathways.Reproducible Analytical Pipelines (RAP) focus use open-source analytical tools (e.g. R Python scripting languages) variety techniques various fields software development, software engineering, analytics collaboration, order deliver reproducible, testable auditable analysis pipelines.heart RAP QA (Quality Assurance) reducing manual steps analytical process. “automation” process commonly motivated time savings. However, RAP motivation documenting manual steps difficult prone error. Reinhart-Rogoff error good example.projects get complicated, processes. Data may come several different sources. may stored processed different locations using different software. might disseminate results multiple formats.Analytical Learning Pathways available ONS Learning Hub. Local Government employees eligible Learning Hub account. “request Analysis Function colleagues specific training need apply account”. , probably job data analysis, least majority . Contact GSS.Capability@statistics.gov.uk request log details. ’ll email back sign-form requests line manager details prior line manager approval request sign-. Visit AF Government Learning Curriculum GSS Website information courses available.","code":""},{"path":"why-script.html","id":"scripting-languages","chapter":"3 Why script?","heading":"3.5 Scripting languages","text":"Python R two popular scripting languages data analysis. capable covering whole data analysis life-cycle data extraction, transformation, analysis, visualisation.scripting languages geared just one two aspects data analysis life-cycle. SQL working databases, whilst JavaScript primarily making web pages interactive adds value data visualisation.scripting languages extend functionality point--click data analysis tools. VBA DAX extend functionality Excel Power BI respectively. Arcade used tandem ArcGIS, Mata used Stata.","code":""},{"path":"why-script.html","id":"r-python","chapter":"3 Why script?","heading":"3.5.1 R & Python","text":"Python R open-source scripting languages popular data analysts. Python general-purpose language easy--understand syntax. R’s functionality developed statisticians mind popular academia research.","code":""},{"path":"why-script.html","id":"notebooks","chapter":"3 Why script?","heading":"3.5.1.1 Notebooks","text":"TODO: Jupyter & R Markdown notebooks","code":""},{"path":"why-script.html","id":"sql","chapter":"3 Why script?","heading":"3.5.2 SQL","text":"SQL (Structured Query Language) designed storing, manipulating retrieving data database. SQL commands simpler range narrower R Python commands. example, time series spatial analysis isn’t within scope SQL. Also, whilst much data still held databases, data now commonly CSV files formats.SQL run database server, even today’s powerful laptops, can time saving benefits. type database can mean SQL extensions different syntax, core elements SELECT JOIN generic.Often ’s case choosing use SQL say R, using . SQL initially extract data corporate database. R combine data sources, e.g. ONS, analyse visualise .","code":""},{"path":"why-script.html","id":"vba","chapter":"3 Why script?","heading":"3.5.3 VBA","text":"VBA (Visual Basic Applications) Microsoft’s scripting language , built , Office programmes like Word PowerPoint. However, data analysis purposes, extends automates Excel interest.","code":""},{"path":"r.html","id":"r","chapter":"4 R & RStudio","heading":"4 R & RStudio","text":"R scripting language. RStudio IDE (Interactive Development Environment), software, makes easier write debug R scripts. need installing laptop.can choose use different IDE R. VS Code recommended alternative. However, VS Code good extensibility, initially easy navigate configure.One stand-aspects R user community, amazingly helpful supportive. RStudio plays key role R community.","code":""},{"path":"r.html","id":"installation","chapter":"4 R & RStudio","heading":"4.1 Installation","text":"’s guidance Installing R RStudio appendix Hands Programming R Garrett Grolemund.Council laptops, want 64-bit Windows versions R RStudio. ’s free open-source license RStudio Desktop currently use. RStudio included Council’s Software Centre, available laptop, ’s currently several versions old. R isn’t currently available Software Centre.Depending permissions laptop, may may able install update R RStudio . can’t, need make request via SCC Service Desk. form complete “Request Something”titled “Peripheral & Software Requests”. complete form ’ll need 20 digit business unit (Integra) code prior verbal approval Business Unit Manager. may also need follow process update R RStudio.RStudio installation generally straight forward. However, R installation requires write permissions R library folder e.g. C:\\Program Files\\R\\R-4.1.2\\library. Without , ’ll able use R packages provided base R installation. may also need add R_LIBS_USER User Environment Variable set R library folder e.g. C:\\Program Files\\R\\R-4.1.2\\library.update R, method ’ve found reliable using installr package. R GUI rather RStudio run:","code":"\n#install.packages(\"installr\")\nlibrary(installr) \nupdateR()"},{"path":"r.html","id":"getting-started-with-r","chapter":"4 R & RStudio","heading":"4.2 Getting started with R","text":"’s need provide advice getting started R, signposting excellent resources listed RStudio beginners page:RStudio Education - BeginnersHadley Wickham’s R Data Science main book people use new R. However, already coding experience Succinct Intro R Steve Haroz useful.re-styled searchable version R documentation easier use original format provided RStudio: rstudio.github.io/r-manuals.","code":""},{"path":"r.html","id":"library","chapter":"4 R & RStudio","heading":"4.3 Library","text":"languages, Python, use terms package library interchangeably. R specific. extend base R installation packages useful installing packages library.library just local folder laptop, usually sub-folder R installation e.g. C:\\Program Files\\R\\R-4.1.2\\library.install.packages(\"dplyr\") installs new packages library. need per package version laptop (version R).library(dplyr) loads previously installed, non base R package, library current R session. need every R session ’re using non base R package, typically top script. Alternatively, can avoid loading entire package make use :: notation, example:droids <- dplyr::filter(dplyr::starwars, species == \"Droid\").might writing packages want explicit examples.","code":""},{"path":"r.html","id":"pid","chapter":"4 R & RStudio","heading":"4.4 RStudio security & data protection","text":"","code":""},{"path":"r.html","id":"workspace","chapter":"4 R & RStudio","heading":"4.4.1 Workspace","text":"encourage reproducible R scripts, Hadley Wickham recommends preserving workspace sessions. entails deselecting couple options save restore .Rdata (see chapter 8 Workflow: projects Hadley’s R4DS book).Hadley’s recommendation also reduces chances inadvertently sharing PID GitHub repository. However, .Rdata also included .gitignore file repository set private (see section GitHub security & data protection).","code":""},{"path":"r.html","id":"passwords","chapter":"4 R & RStudio","heading":"4.4.2 Passwords","text":"’s poor practice include login details code. One option using .Renviron file securing credentials. usethis::edit_r_environ() open user .Renviron.’re sharing script, can anticipate environment variable might set use RStudio API prompt credentials. example:Note including connection logic within single statement works well RStudio Connections tab.","code":"\n# Connect to OSCAR database via ODBC DSN\noscar_con <- DBI::dbConnect(\n  odbc::odbc(),\n  dsn = \"OSCAR\",\n  UID = if (Sys.getenv(\"oscar_userid\") == \"\") {\n    rstudioapi::askForPassword(\"OSCAR User ID\")\n  } else {\n    Sys.getenv(\"oscar_userid\")\n  },\n  PWD = if (Sys.getenv(\"oscar_pwd\") == \"\") {\n    rstudioapi::askForPassword(\"OSCAR Password\")\n  } else {\n    Sys.getenv(\"oscar_pwd\")\n  },\n  timeout = 10\n)"},{"path":"r.html","id":"style-guide","chapter":"4 R & RStudio","heading":"4.5 Style guide","text":"Scripting style guide makes collaboration easier. style guide less important collaborators scripting style guide.current recommendation (open discussion) follow tidyverse style guide, benefits familiarity via tidyverse package documentation, supporting tools styler RStudio add-.","code":""},{"path":"r.html","id":"rstudio-tips","chapter":"4 R & RStudio","heading":"4.6 RStudio tips","text":"","code":""},{"path":"r.html","id":"code-display","chapter":"4 R & RStudio","heading":"4.6.1 Code display","text":"non-default Global Options, Code Display, make little easier read write code:Show margin (aim limit line code 80 characters)Show margin (aim limit line code 80 characters)Highlight R function callsHighlight R function callsRainbow parentheses (since RStudio v1.4)Rainbow parentheses (since RStudio v1.4)","code":""},{"path":"r.html","id":"document-outline-headings","chapter":"4 R & RStudio","heading":"4.6.2 Document outline & headings","text":"Code sections subsections useful:sections can collapsed also listed document outline pane:","code":"\n# Prefix a section with a hash tag and suffix with 4 or more dashes ----\n## Subsections have additional hash tags ----"},{"path":"r.html","id":"viewpipesteps-addin","chapter":"4 R & RStudio","heading":"4.6.3 ViewPipeSteps addin","text":"pipe %>% magrittr package useful reading writing code, can make debugging cumbersome. ViewPipeSteps addin lets view output pipe chain step. install:use:","code":"\ndevtools::install_github(\"daranzolin/ViewPipeSteps\")\nlibrary(ViewPipeSteps)"},{"path":"r.html","id":"base-pipe","chapter":"4 R & RStudio","heading":"4.6.4 Base pipe","text":"magrittr pipe proved popular base R now includes pipe: |>.’s setting RStudio > Tools > Global Options … > Code > Editing “Use native pipe operator”, includes inserting |> instead %>% use keyboard shortcut Ctrl + Shift + M.","code":""},{"path":"r.html","id":"keyboard-shortcuts","chapter":"4 R & RStudio","heading":"4.6.5 Keyboard shortcuts","text":"RStudio lots keyboard shortcuts. find useful preference areas IDE use often. shortcuts might find useful:","code":""},{"path":"r.html","id":"further-resources-2","chapter":"4 R & RStudio","heading":"4.7 Further resources","text":"5 tips writing clean R code, Marcin Dubel R bloggers (15 March 2021)","code":""},{"path":"rmd.html","id":"rmd","chapter":"5 Markdown","heading":"5 Markdown","text":"","code":""},{"path":"rmd.html","id":"r-markdown-vs-markdown","chapter":"5 Markdown","heading":"5.1 R Markdown vs Markdown","text":"Markdown markup language creating formatted text using plain-text editor. main aim readability, simple, unobtrusive syntax readable -, unlike text formatted markup language RTF HTML. raw markdown document easy read, well final rendered output.GitHub flavour markdown, commonly used README.md file serves introduce GitHub repository.R Markdown another flavour markdown. combines reproducible manner: code, output, commentary. R Markdown documents support different output formats, like PDFs, Word files, slideshows, HTML. Hadley Wickham lists three main uses R Markdown files :communicating decision makers, want focus conclusions, code behind analysis.communicating decision makers, want focus conclusions, code behind analysis.collaborating data scientists (including future !), interested conclusions, reached (.e. code).collaborating data scientists (including future !), interested conclusions, reached (.e. code).environment data science, modern day lab notebook can capture , also thinking.environment data science, modern day lab notebook can capture , also thinking.R Markdown can really helpful keeping data analysis work single place, rather wondering whether notes script comments, OneNote Word document. Similarly output embedded rather relying well organised data output folder structures. Finally, linear nature document also provides structure. Combining R Markdown GitHub provides version control (audit trail log work evolved), plus GitHub Issues Actions can add project management wrapper around work.","code":""},{"path":"rmd.html","id":"r-markdown-security-data-protection","chapter":"5 Markdown","heading":"5.2 R Markdown security & data protection","text":"limit R Markdown, rather current unapproved use GitHub, repo project PID confidential data must exclude rendered output R Markdown file. .Rmd file fine included GitHub repo, rendered output e.g. .pdf .html, includes output code probably confidential data, needs excluded GitHub repo, even repo private. ’m clear yet implications collaborating R Markdown e.g. R Notebook, ’d interested hear. limitation make sharing R Markdown rendered output little cumbersome. Council’s always VPN made less , upcoming benefits SharePoint upgrade fuller roll-MS Teams functionality also help. Ultimately though, GitHub proves useful, need make case paid, fuller functioned secure Council instance. See section GitHub security & data protection detail , particular use .gitignore exclude rendered R Markdown output GitHub repo.","code":""},{"path":"rmd.html","id":"r-notebooks","chapter":"5 Markdown","heading":"5.3 R Notebooks","text":"TODO - technical vs data exploration - don’t add github","code":""},{"path":"rmd.html","id":"quarto","chapter":"5 Markdown","heading":"5.4 Quarto","text":"Quarto medium term replacement R Markdown also covers Python Julia. ’re thinking starting use R Markdown, ’s probably worth putting efforts Quarto instead.’s possible install Quarto without admin rights.RStudio includes integration Quarto, release v2022.02 onwards.Tools make simple convert R Markdown Quarto expected available summer 2022.","code":""},{"path":"rmd.html","id":"bookdown","chapter":"5 Markdown","heading":"5.5 Bookdown","text":"notes written using bookdown package, built top R Markdown knitr.Rmd file contains one one chapter, chapter defined first-level heading #.understand bookdown evolution Quarto book, visit RStudio Community post.","code":""},{"path":"rmd.html","id":"themes","chapter":"5 Markdown","heading":"5.5.1 Themes","text":"theme notes changed September 2021 GitBook style Three-column Bootstrap style.","code":""},{"path":"rmd.html","id":"publishing","chapter":"5 Markdown","heading":"5.5.2 Publishing","text":"notes published GitHub Pages GitHub Actions. GitHub Action configured start ’s push master branch. Action renders Rmd files master branch HTML deploys HTML files static website branch called gh-pages. Alternatives using GitHub Actions include Travis Jekyll.used steps outlined following blog post: publish bookdown projects GitHub Actions GitHub Pages. However, lot git bash commands manually couple fixes made deploy_bookdown.yaml file:1. …… added …2. used GITHUB_TOKEN rather GH_PAT, per change GitHub-Pages-deploy.","code":"uses: Cecilapp/GitHub-Pages-deploy@masterwith:       \n  build_dir: _book/       \n  email: ${{ secrets.EMAIL }}"},{"path":"rmd.html","id":"flexdashboard","chapter":"5 Markdown","heading":"5.6 Flexdashboard","text":"goal flexdashboard make easy create interactive dashboards R, using R Markdown.pkgs.rstudio.com/flexdashboardFlexdashboards don’t functionality Power BI, allow data input like Shiny. However, simple quick create. can good option dashboard unlikely maintained beyond specific project. flexdashboard output simply HTML file, ’s useful need share dashboard people outside organisation. ’re also obviously good option ’ve done data analysis preparatory work R. Council’s imminent upgrade SharePoint fuller MS Teams functionality, really useful way publish flexdashboards.TODO: Test whether flexdashboard can hosted via Power BI Report Server IFrame.Add custom visual HTML Content.iFrame = “”Try S:/BI Team …etc.Try S:/BI Team …etc.Load html Report server ? like pbix?Load html Report server ? like pbix?scc-pi.github.io/asc-localities-insight example flexdashboard. .html file hosted GitHub also added “Adult Health Social Care Programme” MS Team website tab.","code":""},{"path":"rmd.html","id":"r-markdown-websites","chapter":"5 Markdown","heading":"5.7 R Markdown websites","text":"starting point understanding build static website R Markdown RStudio webpage:rmarkdown.rstudio.com/lesson-13.htmlThis turn, points detail Definitive Guide R Markdown:bookdown.org/yihui/rmarkdown/rmarkdown-site.html","code":""},{"path":"rmd.html","id":"build","chapter":"5 Markdown","heading":"5.7.1 Build","text":"local copy project close root e.g. C:/Repo/project-name. problems building site long path names /OneDrive.Copy latest R Markdown files, plus supporting files directories, local project folder.Use build pane RStudio project.adding removing pages need full build. ensures header menu options consistent across pages. ’re amending page need knit one R Markdown file.Adding removing pages needs reflected navbar _site.yml.R Markdown files project folder knitted build unless prefixed underscore.","code":""},{"path":"rmd.html","id":"deploy","chapter":"5 Markdown","heading":"5.7.2 Deploy","text":"build creates _site folder project directory can copied whole static web server, failing file server. Note MS Teams SharePoint aren’t intended serve static websites type.’re allowed static web server, _site currently copied : S:/BI Team/project-nameAs ’re using file server rather web server, view home page site specify index.html path copy browser: S:/BI Team/project-name/_site/index.htmlBI Team members full control permissions S:/BI Team can add read permissions Council officers can access site (files S:/BI Team/project-name).content folder updated, read permission re-applied. doesn’t involve re-adding names individual officers, ensuring read checked hitting apply.","code":""},{"path":"rmd.html","id":"rolldown","chapter":"5 Markdown","heading":"5.8 Rolldown","text":"Rolldown R Markdown extension builds scroll-driven HTML documents storytelling, .k.scrollytelling.’s similar ArcGIS StoryMaps proved popular people might familiar .","code":""},{"path":"rmd.html","id":"child-r-markdown","chapter":"5 Markdown","heading":"5.9 Child R Markdown","text":"couple use cases child R Markdown documents:content large breaking smaller parts makes manageable.content large breaking smaller parts makes manageable.want include child R Markdown document one parent document. example libraries repo uses child R Markdown document standalone example much larger project documentation document.want include child R Markdown document one parent document. example libraries repo uses child R Markdown document standalone example much larger project documentation document.Note child R Markdown YAML header, just inherits parent’s YAML header.","code":""},{"path":"rmd.html","id":"iteration","chapter":"5 Markdown","heading":"5.9.1 Iteration","text":"third complicated use case child R Markdown, use parameter iterate child R Markdown document. still single parent.Rmd single child.Rmd file. However, single knitted output file, n iterations child document content depending number values parameter. ’s proof--concept example C19Surveillance repo. Three different residential types passed parameter child R Markdown document, renders map summary table residential type knitted output:iteration technique isn’t prominent demand reports outside Council largely superseded browser based dashboards, provided via Power BI Shiny. However, Council hasn’t fully transitioned static reports (e.g. pdf files) browser based dashboards. , may still expectation, demand, iterative reports. Plus, flexdashboard example noted uses child R markdown iteration, thanks code largely derived blog SOMTOM (January 2019).","code":""},{"path":"rmd.html","id":"r-markdown-tips","chapter":"5 Markdown","heading":"5.10 R Markdown tips","text":"","code":""},{"path":"rmd.html","id":"markdown-visual-editor","chapter":"5 Markdown","heading":"5.10.1 Markdown visual editor","text":"RStudio includes visual editor markdown, makes like using MS Word:","code":""},{"path":"rmd.html","id":"chunk-named-setup","chapter":"5 Markdown","heading":"5.10.2 Chunk named setup","text":"Naming code block setup means restart RStudio execute code middle markdown document, setup block run first. example, make sure libraries loaded first:","code":""},{"path":"rmd.html","id":"further-resources-3","chapter":"5 Markdown","heading":"5.11 Further resources","text":"R Markdown RStudioChapter 27 R Markdown, R4DS Hadley Wickham.Authoring Books Technical Documents R Markdown Yihui Xie definitive resource R Markdown.","code":""},{"path":"python.html","id":"python","chapter":"6 Python","heading":"6 Python","text":"","code":""},{"path":"python.html","id":"reticulate","chapter":"6 Python","heading":"6.1 Reticulate","text":"reticulate R package allows R integrate Python. RStudio embedded reticulate IDE. example, can define default Python environment Global Options Project Options. can also now inspect Python objects RStudio Environment pane.","code":""},{"path":"python.html","id":"arcgis-api-wrappers","chapter":"6 Python","heading":"6.2 ArcGIS & API wrappers","text":"Council’s ArcGIS software ESRI much stronger integration Python R (see section ArcGIS R & Python packages notes ). Similarly, may find Python packages corresponding R package REST API “wrappers” make easier obtain data (see section wrappers notes ). cases, reticulate allows us leverage Python packages within R.","code":""},{"path":"python.html","id":"spyder-ide","chapter":"6 Python","heading":"6.3 Spyder IDE","text":"feature rich IDEs working Python PyCharm, RStudio VS Code. end feature scale default Python editor IDLE installed every version Python.Spyder feature rich many IDEs, probably enough satisfy initial needs without complicated. Spyder installs Python package. makes good option working ArcGIS via Python simplest solution handling ArcGIS licensing requirements related Python package management. Installing Spyder requires cloning default Python environment ArcGIS Pro adding Spyder using conda. IDEs can issues handling virtual environments.","code":""},{"path":"functions-packages.html","id":"functions-packages","chapter":"7 Functions & packages","heading":"7 Functions & packages","text":"","code":""},{"path":"functions-packages.html","id":"r-functions","chapter":"7 Functions & packages","heading":"7.1 R Functions","text":"find copying pasting code several times, ’s good indication probably consider creating function. Writing functions initial investment time effort, pays line, making easier read maintain scripts.place start understanding purpose functions write R functions, relevant chapter Hadley’s R Data Science.","code":""},{"path":"functions-packages.html","id":"lazy-tidy-evaluation","chapter":"7 Functions & packages","heading":"7.1.1 Lazy & tidy evaluation","text":"couple concepts aware writing R functions:Lazy evaluationLazy evaluationTidy evaluationTidy evaluationTidy evaluation particular, ’m comfortable enough yet try explain. ’m getting better using , don’t fully understand . Hadley’s Advanced R book look explanation:Chapter 6 Functions (lazy evaluation)Chapter 6 Functions (lazy evaluation)Metaprogramming section Programming dplyr vignette (tidy evaluation)Metaprogramming section Programming dplyr vignette (tidy evaluation)","code":""},{"path":"functions-packages.html","id":"sourcing-files","chapter":"7 Functions & packages","heading":"7.1.2 Sourcing files","text":"need access functions across different scripts project, can put functions separate R script include script using source function. source function can used relative path (.e. working directory) absolute path. can also used URL, example (Raw) file GitHub.","code":""},{"path":"functions-packages.html","id":"r-packages","chapter":"7 Functions & packages","heading":"7.2 R Packages","text":"","code":""},{"path":"functions-packages.html","id":"writing-packages","chapter":"7 Functions & packages","heading":"7.2.1 Writing packages","text":"find functions useful across different projects include R package. Writing R packages isn’t conceptually difficult, ’s case becoming familiar R package conventions documenting code usually .’ve written couple small R packages called popsheff boundsheff. Instead functions, contain population boundary data Sheffield. resources relied understand create packages R package contains include:Developing Packages RStudio IDEDeveloping Packages RStudio IDEHadley’s R Packages bookHadley’s R Packages bookexampleRPackageexampleRPackageThe Hadley R package babynamesThe Hadley R package babynamesResources intend use include:goodpractice R packagegoodpractice R packagePkgdownPkgdown","code":""},{"path":"functions-packages.html","id":"installing-packages","chapter":"7 Functions & packages","heading":"7.2.2 Installing packages","text":"Packages typically installed library (designated folder local drive) using install.packages function. Packages loaded R session library using library function.install.packages usually used install packages hosted CRAN. Hosting package CRAN involves verification process, quality check, reviews etc. ’ve done popsheff boundsheff packages, installed different way, either using:RStudio Tools > Install packages… menu item load Windows binary (zip) file S:/BI Team/ShareToAll/RPackages work Sheffield City Council.RStudio Tools > Install packages… menu item load Windows binary (zip) file S:/BI Team/ShareToAll/RPackages work Sheffield City Council.GitHub via devtools R package install_github function.GitHub via devtools R package install_github function.","code":"\n#install.packages(\"devtools\")\ndevtools::install_github(\"scc-pi/popsheff\")"},{"path":"github.html","id":"github","chapter":"8 Version control & GitHub","heading":"8 Version control & GitHub","text":"don’t familiar version control, Git GitHub make use notes contents scc-pi repositories. ’re new scripting R, visualisations using R Markdown better starting points version control.notes public, contribute .e. edit , need GitHub account granted permission owner scc-pi (try Laurie first, Giles Anne help ). can edit directly GitHub via browser.also need GitHub account permission access one private repositories, public repositories, download file, copy & paste code, source use function:Try raising issue spot problem, suggestion question.","code":"\n# # Load functions from a public scc-pi repository \n# source(\"https://raw.githubusercontent.com/scc-pi/functions/main/Examples.R\")\n# \n# # Call one of our Sheffield area functions that returns LSOA codes \n# shef_lsoa_codes() %>% \n#   head(5) %>% #only display the first 5 records\n#   knitr::kable() #display them in a nice table "},{"path":"github.html","id":"why-version-control","chapter":"8 Version control & GitHub","heading":"8.1 Why version control?","text":"scripting might make backup copy file, new changes break previously working can revert backup copy. ’re collating contributions document different people might use initials file names indicate keep track ’s made contributions version e.g. “BI_Principles-GR.docx” “BI_Principles-NM.docx”. examples manual version control.talk version control scripting typically mean version control system. tool assists tracking changes files time different people. systems also usually include reasons changes, file, rather version, comparison functionality. version control system backup/audit trail/collaboration thing.much engaging explanation:GITHUB SUPPORTING, REUSING, CONTRIBUTING, FAILING SAFELY","code":""},{"path":"github.html","id":"git","chapter":"8 Version control & GitHub","heading":"8.2 GIT","text":"Git open-source distributed version control system tracking changes source code software development.","code":""},{"path":"github.html","id":"github-1","chapter":"8 Version control & GitHub","heading":"8.3 GitHub","text":"GitHub product offers Git-based source control repositories. products also offer Git-based repositories, GitLab, BitBucket, Azure DevOps.scc-pi GitHub organisation free account. approval . using proves successful need discuss approval BCIS.","code":""},{"path":"github.html","id":"github-security","chapter":"8 Version control & GitHub","heading":"8.3.1 GitHub security & data protection","text":"GitHub.com hosted US, issue terms data protection obligations. Plus, ’ve checked compliance Information Governance, storing PID (Person Identifiable Data), anything commercially confidential politically sensitive, GitHub.com currently -..gitignore file lists folders files want exclude repository .e. specifies want ignore. Holding file based data (e.g. CSV files), whether ’re original transformed, /data sub-folder, makes simple exclude data repository adding following .gitignore file:additional precaution, projects involving confidential information held private repository .Rdata also included .gitignore file (see section RStudio security & data protection):Microsoft GitHub GitHub Enterprise Server -premises deployment GitHub.com hosted Azure environment. However, BitBucket currently looks like likely solution GitHub.","code":"# data directory\n/data/\n# Session Data files\n.RData"},{"path":"github.html","id":"bitbucket","chapter":"8 Version control & GitHub","heading":"8.3.2 BitBucket","text":"BitBucket Council approved used Digital Services, team Council uses version control code. BitBucket EU hosting option cheaper GitHub. popular organisations needing private repositories (main use case), whereas GitHub popular open source projects. Fundamentally, two similar functionality. One difference narrower scope BitBucket, instead chooses focus stronger integration software, particular Atlassian products Trello, Jira Confluence.current BI Team GitHub trial comes conclusion version control something need, conversation Information Governance TDA BitBucket. also need keep touch Digital Services may switch alternative version control provider July 2022. need verify expectation using BitBucket RStudio experience using GitHub.","code":""},{"path":"github.html","id":"forking-pull-requests","chapter":"8 Version control & GitHub","heading":"8.3.3 Forking & pull requests","text":"GitHub forking pull requests common workflows collaborating repository.TODO - ’ll add ’ve collaborated repository","code":""},{"path":"github.html","id":"other-features","chapter":"8 Version control & GitHub","heading":"8.3.4 Other features","text":"GitHub now allows private repositories free organisation accounts, GitHub features available.evolution repository captured commits .e. changes files repository. However, original issue, ideas discussion surrounding commit captured GitHub issue. can link commit issue including issue number prefixed # commit message.’ve used GitHub project organise private C19Surveillance repository kanban board. However, project restricted issues single repository.GitHub pages actions used publish notes.also GitHub features explore.","code":""},{"path":"github.html","id":"git-rstudio","chapter":"8 Version control & GitHub","heading":"8.4 Git & RStudio","text":"Introduction GitHub GitHub Learning Lab good place get started become familiar initial concepts GitHub website.use GitHub RStudio ’s cheatsheet thorough step--step guide, Happy Git R Jenny Bryan. main recommendation setup connection using keys SSH. connection method -passes issues Council’s proxy server using HTTPS connection method. Since August 2021 GitHub token authentication required (e.g. SSH) steps Jenny Bryan’s book (e.g. chapters 9 10 connecting HTTPS) date. October 2021 case, issue #181 gets closed Happy Git R GitHub repo, ’s fixed. recommendation skip chapters 9 10 focus 11 15 (SSH New project, GitHub first).frequently return Jenny Bryan’s book, especially chapters 15, 16 17 different ways setting local RStudio project connected GitHub. far, ’ve mainly stuck Chapter 15 New project, GitHub first.","code":""},{"path":"github.html","id":"further-resources-4","chapter":"8 Version control & GitHub","heading":"8.5 Further resources","text":"Version Control Git SVN, RStudio Support","code":""},{"path":"rap.html","id":"rap","chapter":"9 Reproducible Analytical Pipelines","heading":"9 Reproducible Analytical Pipelines","text":"Reproducible Analytical Pipelines (RAPs) automated statistical analytical processes. incorporate elements software engineering best practice ensure pipelines reproducible, auditable, efficient, high quality.","code":""},{"path":"rap.html","id":"further-resources-5","chapter":"9 Reproducible Analytical Pipelines","heading":"9.1 Further resources","text":"Reproducible Analytical Pipelines (RAP), Government Analysis Function","code":""},{"path":"databases.html","id":"databases","chapter":"10 Council data","heading":"10 Council data","text":"","code":""},{"path":"databases.html","id":"oscar","chapter":"10 Council data","heading":"10.1 OSCAR","text":"TODO","code":""},{"path":"databases.html","id":"corporate-spatial-database","chapter":"10 Council data","heading":"10.2 Corporate spatial database","text":"TODO\n- Postgres - extensions geometry types e.g. line","code":""},{"path":"databases.html","id":"further-resources-6","chapter":"10 Council data","heading":"10.3 Further resources","text":"Databases using R RStudio","code":""},{"path":"warehouse.html","id":"warehouse","chapter":"11 Databases, warehouses & lakes","heading":"11 Databases, warehouses & lakes","text":"TODO - definitions, open debate","code":""},{"path":"warehouse.html","id":"corporate-data-warehouse","chapter":"11 Databases, warehouses & lakes","heading":"11.1 Corporate data warehouse","text":"","code":""},{"path":"warehouse.html","id":"postgres","chapter":"11 Databases, warehouses & lakes","heading":"11.2 Postgres","text":"TODO - cross-ref corporate spatial database","code":""},{"path":"warehouse.html","id":"sqlite","chapter":"11 Databases, warehouses & lakes","heading":"11.3 SQLite","text":"Access SQLite database controlled permissions folder stored. Unlike databases, create users authenticated database, grant privileges specific datasets users.SQLite also different databases fields assigned specific data types data type definitions strictly enforced. Instead, SQLite uses storage classes values different data types can stored. particular, date types handled differently. ArcGIS handles SQLite dates without needing special attention, reading dates SQLite R Power BI needs attention. example, using JD() function insol R package:","code":""},{"path":"warehouse.html","id":"spatialite","chapter":"11 Databases, warehouses & lakes","heading":"11.3.1 SpatiaLite","text":"SpatiaLite extends SQLite support spatial data. RSQLite package includes driver SpatiaLite.Robin Lovelace chapter spatial databases book Geocomputation R.testing different options, SpatiaLite best file based database access spatial data via tools R Power BI without complication ArcGIS licenses, also provides reliable access ArcGIS. far ’ve tested SpatiaLite databases created ArcGIS","code":""},{"path":"api.html","id":"api","chapter":"12 APIs","heading":"12 APIs","text":"","code":""},{"path":"api.html","id":"rest-apis","chapter":"12 APIs","heading":"12.1 REST APIs","text":"RESTfulTODO\n- Foundation Council services","code":""},{"path":"api.html","id":"wrappers","chapter":"12 APIs","heading":"12.2 Wrappers","text":"TODO","code":""},{"path":"api.html","id":"rectangling","chapter":"12 APIs","heading":"12.3 Rectangling","text":"Data returned REST APIs typically provided hierarchical structure JSON common format. tidyverse Rectangling vignette explains structure data API familiar tabular structure.TODO\nscc-pi functions rectangling e.g. postcode geocoding","code":""},{"path":"api.html","id":"api-via-council-proxy","chapter":"12 APIs","heading":"12.4 API via Council proxy","text":"Council buildings connected directly Council’s network, rather via AlwaysOn VPN, may difficulty accessing external API’s RStudio (installing packages using GitHub). following post Posit outlines method resolve : Configuring R Use HTTP HTTPS Proxy.summary:Run command file.edit('~/.Renviron') within RStudio.Run command file.edit('~/.Renviron') within RStudio.Add following settings .Renviron file, amended Council login ID password.Add following settings .Renviron file, amended Council login ID password.Uncheck setting Use Internet Explorer library/proxy HTTP Global Options:Restart RStudio.using AlwaysOn VPN comment settings:notes updated get figuring setting automatically toggles proxy setting rather change manually.test ’s working try following:show content similar see just use URL (http://api.zippopotam.us/us/90210) browser:breadcrumbs determining proxy server port:Windows settingsWindows settingsProxy settingsProxy settingsType script address Edge .e. http://172.29.3.101/proxy.pacType script address Edge .e. http://172.29.3.101/proxy.pacOpen downloaded proxy.pac file text editorOpen downloaded proxy.pac file text editorTry proxy servers ports listed proxy.pacTry proxy servers ports listed proxy.pac","code":"http_proxy=http://172.29.2.22:8080\nhttp_proxy_user=lp41455:password123\n\nhttps_proxy=https://172.29.2.22:8080\nhttps_proxy_user=lp41455:password123\n# http_proxy=http://172.29.2.22:8080\n# http_proxy_user=lp41455:password123\n# \n# https_proxy=https://172.29.2.22:8080\n# https_proxy_user=lp41455:password123\n#install.packages(\"httr2\")\nlibrary(httr2)\nreq <-  request(\"http://api.zippopotam.us/us/90210\")\nresp <- req_perform(req)\nresp |> resp_body_html(check_type = FALSE)## {html_document}\n## <html>\n## [1] <body><p>{\"post code\": \"90210\", \"country\": \"United States\", \"country abbr ..."},{"path":"public-data.html","id":"public-data","chapter":"13 External data sources","heading":"13 External data sources","text":"","code":""},{"path":"public-data.html","id":"office-of-national-statistics","chapter":"13 External data sources","heading":"13.1 Office of National Statistics","text":"example ’re going get population Ward Sheffield. First need find dataset ONS website. copy link Excel file use script :monstR onsr R packages provide access ONS beta API. However, API currently limited number datasets, particular lacks access data smaller geographies ’re typically interested e.g. wards LSOAs.","code":""},{"path":"public-data.html","id":"crm","chapter":"13 External data sources","heading":"13.1.1 CRM","text":"TODO","code":""},{"path":"public-data.html","id":"nomis","chapter":"13 External data sources","heading":"13.1.2 NOMIS","text":"TODO","code":""},{"path":"public-data.html","id":"ministry-of-housing-communities-local-government","chapter":"13 External data sources","heading":"13.2 Ministry of Housing, Communities & Local Government","text":"Official statistics MHCLG (Ministry Housing, Communities & Local Government):opendatacommunities.orgguides.opendatacommunities.org/article/19-apis-part-2-using-r---apis","code":""},{"path":"spatial-data-sources.html","id":"spatial-data-sources","chapter":"14 Spatial data sources","heading":"14 Spatial data sources","text":"","code":""},{"path":"spatial-data-sources.html","id":"councils-spatial-data","chapter":"14 Spatial data sources","heading":"14.1 Council’s spatial data","text":"Council’s spatial data hosted ESRI’s ArcGIS web GIS tools.Portal (ArcGIS Enterprise) Council-wide:sheffieldcitycouncil.cloud.esriuk.com/portal/homeArcGIS Online (AGOL) public facing equivalent Portal:sheffieldcc.maps.arcgis.comUnlike R, ArcGIS open source incurs financial cost. Portal AGOL require login credentials licensing data protection purposes. exception, public data AGOL, example Council’s open data site:data-sheffieldcc.opendata.arcgis.com","code":""},{"path":"spatial-data-sources.html","id":"external-spatial-data","chapter":"14 Spatial data sources","heading":"14.2 External spatial data","text":"Data ’s publically available available via license Council.","code":""},{"path":"spatial-data-sources.html","id":"open-geography","chapter":"14 Spatial data sources","heading":"14.2.1 Open Geography Portal","text":"specific UK, spatial data ONS Ordnance Survey. notes accessing data chapter Public Data Sources Open Geography Portal OS Data Hub.ONS produced Geography Statistics Training materials good place start.","code":""},{"path":"spatial-data-sources.html","id":"ordnance-survey","chapter":"14 Spatial data sources","heading":"14.2.2 Ordnance Survey","text":"TODO","code":""},{"path":"spatial-data-sources.html","id":"os-data-hub","chapter":"14 Spatial data sources","heading":"14.2.2.1 OS Data Hub","text":"TODO","code":""},{"path":"spatial-data-sources.html","id":"lginform","chapter":"14 Spatial data sources","heading":"14.2.3 LGInform?","text":"","code":""},{"path":"spatial-data-sources.html","id":"lsoapop-r-package","chapter":"14 Spatial data sources","heading":"14.2.4 LSOApop R package","text":"goal LSOApop make population estimates Lower layer Super Output Areas (LSOA) Indecies Multiple Deprivation (IMD) easily available R.nhs-r-community.github.io/LSOApopTODO","code":""},{"path":"spatial-data-sources.html","id":"living-atlas","chapter":"14 Spatial data sources","heading":"14.2.5 Living Atlas","text":"ESRI’s Living Atlas lot content, ’ve yet properly explore use (TODO).","code":""},{"path":"gis-with-web-desktop-tools.html","id":"gis-with-web-desktop-tools","chapter":"15 GIS with web & desktop tools","heading":"15 GIS with web & desktop tools","text":"section aimed Council data analysts little experience spatial data GIS. GIS traditionally domain specialists especially true Council. However, Council’s new web based GIS tools open GIS wider user base, better opportunities data analysts make use spatial data without GIS specialist.","code":""},{"path":"gis-with-web-desktop-tools.html","id":"web-maps-dashboards","chapter":"15 GIS with web & desktop tools","heading":"15.1 Web maps & dashboards","text":"","code":""},{"path":"gis-with-web-desktop-tools.html","id":"arcgis","chapter":"15 GIS with web & desktop tools","heading":"15.1.1 ArcGIS","text":"Council’s Portal AGOL default home spatial data. Similarly, ’re looking just extract spatial data, share share spatial analysis via web map dashboard, default tool also Council’s Portal AGOL. share content Portal AGOL need Creator license.Anne Tetley provided following guidance (Portal) creating content Portal AGOL:Creating web map PortalCreating web map PortalCreating Web ApplicationCreating Web Application","code":""},{"path":"gis-with-web-desktop-tools.html","id":"power-bi","chapter":"15 GIS with web & desktop tools","heading":"15.1.2 Power BI","text":"GIS capabilities Power BI match Portal AGOL. However, small proportion analysis sharing spatial, Power BI good option. ArcGIS Power BI integration tool available us. Anne Tetley provided following guidance (Portal):ArcGIS Power BI","code":""},{"path":"gis-with-web-desktop-tools.html","id":"desktop-gis","chapter":"15 GIS with web & desktop tools","heading":"15.2 Desktop GIS","text":"specialised spatial analysis desktop GIS best. However, move sharing spatial information using web maps dashboards, rather static PDF maps, desktop GIS increasingly tool GIS specialists.","code":""},{"path":"gis-with-web-desktop-tools.html","id":"arcgis-desktop","chapter":"15 GIS with web & desktop tools","heading":"15.2.1 ArcGIS Desktop","text":"last fifteen, twenty years, Council’s spatial analysis largely done using ArcGIS Desktop ESRI. powerful piece software, majority GIS uses, ’s sledge hammer crack nut. ’ve done spatial analysis , recommendation first try new, far intuitive, ArcGIS web GIS tools .e. Portal AGOL.ESRI stopped development ArcGIS Desktop, though won’t retired years yet. New functionality added ArcGIS Pro now .","code":""},{"path":"gis-with-web-desktop-tools.html","id":"arcgis-pro","chapter":"15 GIS with web & desktop tools","heading":"15.2.2 ArcGIS Pro","text":"ArcGIS Pro another desktop GIS application ESRI. isn’t old ArcGIS Desktop, less legacy issues. ArcGIS Pro 64-bit closely integrated ArcGIS Enterprise (Portal) AGOL. However, single biggest difference hundreds nested menu driven options located different places ArcGIS Desktop!Council ArcGIS Pro license every purchased ArcGIS Desktop license.","code":""},{"path":"gis-with-web-desktop-tools.html","id":"qgis","chapter":"15 GIS with web & desktop tools","heading":"15.2.3 QGIS","text":"QGIS open source alternative ArcGIS Desktop ArcGIS Pro.","code":""},{"path":"gis-with-web-desktop-tools.html","id":"further-resources-7","chapter":"15 GIS with web & desktop tools","heading":"15.3 Further resources","text":"TODO - cross-ref database chapter spatial database content","code":""},{"path":"gis-with-python.html","id":"gis-with-python","chapter":"16 GIS with Python","heading":"16 GIS with Python","text":"Council’s ArcGIS software ESRI much stronger integration Python R, “GIS Python” chapter precedes “GIS R” chapter.three main ways leveraging GIS (particular Council’s ArcGIS) via Python. increasing order difficulty terms initial setup:ArcGIS Notebooks (see sub-heading immediately )ArcGIS Notebooks (see sub-heading immediately )Non-ESRI IDE e.g. Jupyter Notebooks, VS Code RStudioNon-ESRI IDE e.g. Jupyter Notebooks, VS Code RStudioR via reticulate packageR via reticulate packageArcGIS Notebooks take care Python environment ESRI license settings. Taking Python scripts outside ArcGIS Notebooks, e.g. using VS Code, means ’re taking responsibility Python environment ESRI license settings. Using Python R via reticulate package means added responsibility R environment.","code":""},{"path":"gis-with-python.html","id":"arcgis-notebooks","chapter":"16 GIS with Python","heading":"16.1 ArcGIS Notebooks","text":"ArcGIS Notebooks built top Jupyter Notebook, open-source web application allows create share documents contain live Python code, visualizations, narrative text.ArcGIS Notebooks can created ArcGIS Pro AGOL. also now available ArcGIS Enterprise yet setup Council’s Portal.Learn Python ArcGIS NotebooksNotebooks ArcGIS Pro documentationArcGIS API Python Fundamentals learning plan","code":""},{"path":"gis-with-python.html","id":"arcgis-python-api","chapter":"16 GIS with Python","heading":"16.2 ArcGIS Python API","text":"arcgis package used work ArcGIS Enterprise (Portal) AGOL.- name package ’s purpose - OneNote?use arcpy arcgis packages first need specify ArcGIS Python environment","code":""},{"path":"gis-with-python.html","id":"arcpy","chapter":"16 GIS with Python","heading":"16.3 ArcPy","text":"arcpy package used leverage ArcGIS Desktop Pro functionality. Like arcgis package, use arcpy package first need specify ArcGIS Python environment.distinction web desktop, arcgis arcpy packages respectively, bit simplification serves purpose. ’s worth noting integration two packages isn’t seamless might expect.TODO- setup- cross ref Docker","code":""},{"path":"gis-with-python.html","id":"non-esri-gis-with-python","chapter":"16 GIS with Python","heading":"16.4 Non-ESRI GIS with Python","text":"","code":""},{"path":"gis-with-r.html","id":"gis-with-r","chapter":"17 GIS with R","heading":"17 GIS with R","text":"rule thumb, use GIS R ’re familiar R ArcGIS Python, project just spatial content. project predominantly spatial, consider upskilling ArcGIS. GIS capabilities R packages increasingly competent. However, ’ll swimming tide don’t take advantage Council’s investment ArcGIS platform, tools skills.chapter focusses can include spatial data R project public data sources Council’s ArcGIS platform.","code":""},{"path":"gis-with-r.html","id":"features","chapter":"17 GIS with R","heading":"17.1 Features","text":"term “feature” useful distinguish record “spatial”. “spatial” mean point, line polygon. point pair coordinates, line minimum two pairs coordinates polygons least three pairs.Something keep eye MULTIPOINT, multi-part polygons etc. single record, single feature, one point, line polygon. example, Sheffield secondary school features might MULTIPOINT feature King Edward VII school can one point Lower School near Crosspool, another point Upper School Broomhill.","code":""},{"path":"gis-with-r.html","id":"simple-features","chapter":"17 GIS with R","heading":"17.1.1 Simple features","text":"Simple features open standard developed Open Geospatial Consortium. hierarchical data model represents wide range geometry types, supported sf R package. sf package also plays nice tidyverse.","code":"\n# Create a data frame with some example records \ndf <- tibble::tribble(\n  ~name,    ~postcode, ~longitude,  ~latitude,\n  \"SCC\",    \"S1 2HH\",    -1.470006,   53.38038,\n  \"Blades\", \"S2 4SU\",  -1.470512,   53.36986,\n  \"Owls\",   \"S6 1SW\",    -1.500859,   53.41084\n)\n\n# Create simple features\nsf_shef <- sf::st_as_sf(df, \n                        coords = c(\"longitude\", \"latitude\"), #from postcodes.io\n                        crs = 4326) #WSG84\n\n# Plot\nmapview::mapview(sf_shef, layer.name = \"Sheffield institutions\")"},{"path":"gis-with-r.html","id":"coordinates-projections","chapter":"17 GIS with R","heading":"17.2 Coordinates & projections","text":"minimum need know spatial data use likely involve one three coordinate systems:WSG84 ESPG 4326Web Mercator EPSG 3857OSGB1936 (British National Grid) ESPG 27700Most web maps based features stored WSG84 displayed (projected) Web Mercator. Postcodes.io uses WSG84, Council’s Portal AGOL, ONS Open Geography Portal use OSGB1936 (BNG).","code":"\n# Check the coordinate system of simple features\nsf::st_crs(sf_shef)## Coordinate Reference System:\n##   User input: EPSG:4326 \n##   wkt:\n## GEOGCRS[\"WGS 84\",\n##     ENSEMBLE[\"World Geodetic System 1984 ensemble\",\n##         MEMBER[\"World Geodetic System 1984 (Transit)\"],\n##         MEMBER[\"World Geodetic System 1984 (G730)\"],\n##         MEMBER[\"World Geodetic System 1984 (G873)\"],\n##         MEMBER[\"World Geodetic System 1984 (G1150)\"],\n##         MEMBER[\"World Geodetic System 1984 (G1674)\"],\n##         MEMBER[\"World Geodetic System 1984 (G1762)\"],\n##         MEMBER[\"World Geodetic System 1984 (G2139)\"],\n##         ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n##             LENGTHUNIT[\"metre\",1]],\n##         ENSEMBLEACCURACY[2.0]],\n##     PRIMEM[\"Greenwich\",0,\n##         ANGLEUNIT[\"degree\",0.0174532925199433]],\n##     CS[ellipsoidal,2],\n##         AXIS[\"geodetic latitude (Lat)\",north,\n##             ORDER[1],\n##             ANGLEUNIT[\"degree\",0.0174532925199433]],\n##         AXIS[\"geodetic longitude (Lon)\",east,\n##             ORDER[2],\n##             ANGLEUNIT[\"degree\",0.0174532925199433]],\n##     USAGE[\n##         SCOPE[\"Horizontal component of 3D system.\"],\n##         AREA[\"World.\"],\n##         BBOX[-90,-180,90,180]],\n##     ID[\"EPSG\",4326]]"},{"path":"gis-with-r.html","id":"geographic-projected-coordinate-systems","chapter":"17 GIS with R","heading":"17.2.1 Geographic & projected coordinate systems","text":"reference ellipsoid approximation surface earth provides shape coordinate system can placed.Geographic coordinate systems use ellipsoid define specific locations surface create grid. Datums geographic coordinate systems based specific ellipsoid (specific geographic coordinate system), origin specific location, ellipsoid specific orientation. also called “spatial reference systems” “coordinate reference systems”.Projected coordinate systems like geographic coordinate systems. projected coordinate system also grid used reference locations planet, ’s translation three-dimensional grid onto two-dimensional plane paper map screen.GCS defines data located earth’s surface. PCS tells data draw flat surface screen.Coordinate systems, projected geographic, often identified EPSG code.","code":""},{"path":"gis-with-r.html","id":"arcgisr","chapter":"17 GIS with R","heading":"17.3 ArcGIS R & Python packages","text":"Listed R Python packages allow us leverage ArcGIS functionality. Generally speaking, descending order ease use, scope functionality ascending order.","code":""},{"path":"gis-with-r.html","id":"esri2sf","chapter":"17 GIS with R","heading":"17.3.1 esri2sf","text":"esri2sf R package one four packages listed maintained ESRI. simplest start using doesn’t require installation license ArcGIS Desktop Pro. flip side, least amount functionality code isn’t robust. scope package limited reading simple features data frames AGOL & ArcGIS Enterprise (organisation’s).ONS Open Geography Portal based ArcGIS web tools Portal AGOL. get, example, local authority boundary Sheffield first need navigate dataset website get GeoService API URL:, using:copied GeoService URL,\n\nhttps://services1.arcgis.com/ESMARspQHYMw9BZ9/arcgis/rest/services/Local_Authority_Districts_December_2020_UK_BGC/FeatureServer/0/query?outFields=\\\\\\\\\\\\\\*&=1%3D1\ncopied GeoService URL,https://services1.arcgis.com/ESMARspQHYMw9BZ9/arcgis/rest/services/Local_Authority_Districts_December_2020_UK_BGC/FeatureServer/0/query?outFields=\\\\\\\\\\\\\\*&=1%3D1some resources understand query API,\n\nArcGIS REST API - Query (Feature Service/Layer)\nSQL 92 used ESRI based APIs\nHTML encoding used building URL queries\nresources understand query API,ArcGIS REST API - Query (Feature Service/Layer)SQL 92 used ESRI based APIsHTML encoding used building URL queriesand esri2sf,esri2sf,can get Sheffield boundary simple feature:example reads open data. However, Council’s spatial data Portal AGOL requires login credentials access. Nevertheless, Portal AGOL login credentials smaller requirement ArcGIS Desktop Pro installation license.TODO - test note authentication tokenOur public github.com/scc-pi/functions repository includes functions ShefAreas.R use esri2sf. sub-headings immediately outline ArcGIS packages powerful, also onerous terms licensing setup. possible, intention utilise esri2sf preference ArcGIS packages.information esri2sf package, install use , available github.com/yonghah/esri2sf.","code":"\n# Base URL for ONS Open Geography Portal\nons_geog_base_url <- \"https://services1.arcgis.com/ESMARspQHYMw9BZ9/arcgis/rest/services/\"\n\n# URL part for how detailed the local authority boundary should be\ngeneralised <- \"Local_Authority_Districts_December_2020_UK_BGC\"\n\n# Get Sheffield MSOA boundaries as simple features  \nshef_msoa <- esri2sf::esri2sf(url = stringr::str_c(ons_geog_base_url,\n                                                   generalised,\n                                                   \"/FeatureServer/0\"),\n                              where = \"LAD20NM LIKE 'Sheffield%'\",\n                              geomType = \"esriGeometryPolygon\")\n\n# Plot\nmapview::mapview(shef_msoa, layer.name = \"Sheffield\")"},{"path":"gis-with-r.html","id":"r-arcgis-bridge","chapter":"17 GIS with R","heading":"17.3.2 R-ArcGIS Bridge","text":"R-ArcGIS Bridge name arcgisbinding R package. ’s scope limited :Transferring data directions ArcGIS RTransferring data directions ArcGIS RWrapping R tools use ArcGISWrapping R tools use ArcGISFor information using arcgisbinding package see vignette Using R-ArcGIS Bridge.use R-ArcGIS Bridge need installation license ArcGIS Desktop Pro. loading arcgisbinding package call arc.check_product() define desktop license:Using arcgisbinding ArcGIS Desktop means need use 32-bit R, ArcGIS Desktop 32-bit. ArcGIS Desktop 64-bit Background Geoprocessing option red herring allows using bridge ArcGIS, within R . ArcGIS Pro 64-bit allows use use 64-bit R arcgisbinding.README.md r-bridge GitHub repository best starting point detail R-ArcGIS Bridge requirements installation.R-ArcGIS Bridge write spatial data directly Council’s Portal AGOL. can write local geodatabase, can published Portal AGOL via ArcGIS Pro. R-ArcGIS Bridge can read spatial data directly Council’s Portal AGOL:arc.check_product() define desktop license means results example can’t rendered via GitHub Actions notes. However, example knitted locally included notes isochrones.","code":"\nlibrary(arcgisbinding)\narc.check_product()"},{"path":"gis-with-r.html","id":"leaflet","chapter":"17 GIS with R","heading":"17.4 Leaflet","text":"TODO","code":""},{"path":"gis-with-r.html","id":"rasters","chapter":"17 GIS with R","heading":"17.5 Rasters","text":"TODO","code":""},{"path":"gis-with-r.html","id":"further-resources-8","chapter":"17 GIS with R","heading":"17.6 Further resources","text":"Geocomputation R, Robin Lovelacemapview basics vignetteGeographic vs Projected Coordinate Systems, Heather Smith, ArcGIS Blog (27 February 2020)EPSG 4326 vs EPSG 3857, Lyzi Diamond (26 May 2017)","code":""},{"path":"geocoding.html","id":"geocoding","chapter":"18 Postcodes & addresses","heading":"18 Postcodes & addresses","text":"common use case work spatial analysis dataset addresses. example, produce map certain incidents last year, summarise number incidents Ward.","code":""},{"path":"geocoding.html","id":"uprn","chapter":"18 Postcodes & addresses","heading":"18.1 UPRN","text":"TODO","code":""},{"path":"geocoding.html","id":"postcodes","chapter":"18 Postcodes & addresses","heading":"18.2 Postcodes","text":"’s UPRN, getting location via postcode usually easiest option. ’s accurate UPRN full address, often ’s accurate enough ’s required.example using add_pcd_vars() function builds PostcodesioR package, wrapper postcodes.io API. pass data frame postcode column returns data frame new columns based postcode.admin_district can used answer questions: postcode invalid? postcode Sheffield? can anticipate values NA Sheffield respectively answers yes. common questions function .admin_district argument.Needing coordinates postcode centroid also common, function also .lat_long argument TRUE returns latitude column longitude column.TODO: link sf example & area statsOther columns added including name character vector passed other_vars function argument. example, other_vars=c(\"ccg_code\",\"lsoa_code\"). list valid other_vars defined docs.ropensci.org/PostcodesioR/#examples.pcd_name function argument used specify name data frame’s postcode column isn’t postcode. example, pcd_name=\"pupil_pcode\".Sometimes, postcode dataset included separate column, end combined address column. Depending format quality combined address column extract postcode like :","code":"\n# Create a data frame with some example records\ndf <- tibble::tribble(\n  ~name,    ~postcode,\n  \"SCC\",    \"S1 2HH\",\n  \"Blades\", \"S2 4SU\",\n  \"Owls\",   \"S6 1SW\"\n)\n\n# # Load the function we need\n# source(\"https://raw.githubusercontent.com/scc-pi/functions/main/Addresses.R\")\n# \n# # Add postcode related columns to our data frame\n# add_pcd_vars(df,\n#              pcd_name = \"postcode\",\n#              .admin_district = FALSE,\n#              .lat_long = TRUE,\n#              other_vars = c(\"admin_ward\",\n#                             \"msoa_code\")) %>%\n#   knitr::kable() #display them in a nice table\n# Create a data frame with some example records\ndf <- tibble::tribble(\n  ~name,     ~address,\n  \"SCC\",     \"Pinstone St, Sheffield City Centre, Sheffield S1 2HH\",\n  \"Blades\",  \"Bramall Ln, Highfield, Sheffield S2 4SU\",\n  \"Owls\",    \"76 Penistone Rd N, Sheffield S6 1SW\"\n)\n\n# Extract the postcode from the address into a separate column\ndplyr::mutate(df, \n              postcode = stringr::word(address, -2, -1, sep = \"[:space:]\")) |>\n  knitr::kable()"},{"path":"geocoding.html","id":"pas-postcode-lookup","chapter":"18 Postcodes & addresses","heading":"18.2.1 PAS postcode lookup","text":"PAS, Performance & Analysis Service People Porfolio, maintains postcode lookup table performs role add_pcd_vars() function.TODO: also include Sheffield specific variables e.g. 100 neighbourhoods postcode ?","code":""},{"path":"geocoding.html","id":"postcode-boundaries","chapter":"18 Postcodes & addresses","heading":"18.2.2 Postcode boundaries","text":"TODO: OPEN DATA GB POSTCODE UNIT BOUNDARIES","code":""},{"path":"geocoding.html","id":"split-postcodes","chapter":"18 Postcodes & addresses","heading":"18.2.3 Split postcodes","text":"TODO","code":""},{"path":"geocoding.html","id":"addresses","chapter":"18 Postcodes & addresses","heading":"18.3 Addresses","text":"Anne Tetley provided following guidance (Portal):Geocoding Address Data PortalTODO\n- Portal LLPG Cascade Locator\n- OS Places ESRI integration","code":""},{"path":"other.html","id":"other","chapter":"19 Other","heading":"19 Other","text":"dumping ground matters ’m yet look properly, never mind write notes .","code":""},{"path":"other.html","id":"renv","chapter":"19 Other","heading":"19.1 renv","text":"Introduction renv vignette","code":""},{"path":"other.html","id":"docker","chapter":"19 Other","heading":"19.2 Docker","text":"Using docker containers means don’t deal “works machine” problems.Currently, set-reproducibility issues ’ve arcpy Jupyter notebooks means can’t recommend others Council go path therefore collaborate tools. Docker means address issues, least, allow officers trial arcpy Jupyter notebooks investing complicated setup? typical R projects renv might preferable.Docker Data Science — Step Step Guide, Dean Pleban (18 October 2020)Pros Cons Docker, Nick Iron.io (28 August 2020)Play Dockerrocker R package","code":""},{"path":"other.html","id":"reprex-r-package","chapter":"19 Other","heading":"19.3 reprex R package","text":"reprex.tidyverse.org","code":""},{"path":"other.html","id":"writing-r-packages","chapter":"19 Other","heading":"19.4 Writing R packages","text":"R Packages Hadley Wickham & Jenny Bryan","code":""},{"path":"other.html","id":"roxygen2","chapter":"19 Other","heading":"19.4.1 roxygen2","text":"Introduction roxygen2 vignette10.3 Roxygen comments","code":""},{"path":"other.html","id":"plumber-r-package","chapter":"19 Other","heading":"19.5 plumber R package","text":"rplumber.io","code":""},{"path":"other.html","id":"data-visualisation","chapter":"19 Other","heading":"19.6 Data Visualisation","text":"Data Visualization, practical introduction Kieran Healygrammer graphics, R4DS, Graphics cookbook, stackexchange","code":""},{"path":"references.html","id":"references","chapter":"References","heading":"References","text":"","code":""}]
